<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXON Skills</title>
    
    <!-- Tailwind CSS: ìŠ¤íƒ€ì¼ë§ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ì›¹í°íŠ¸ -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    
    <!-- React & ReactDOM: UI ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://unpkg.com/@babel/standalone@7.24.5/babel.min.js"></script>

    <!-- Global Styles -->
    
    <style>
        @layer base {
            /* ëª¨ë“  ìš”ì†Œê°€ ì„¤ì •í•œ Pretendardë¥¼ ìƒì†ë°›ë„ë¡ ê°•ì œí•©ë‹ˆë‹¤. */
            *, html, body {
              font-family: 'Pretendard', sans-serif;
            }
        }
        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í„°ë§ˆì´ì§• - ì¡°ê¸ˆ ë” ë‘¥ê¸€ê³  ê·€ì—½ê²Œ */
        ::-webkit-scrollbar { width: 10px; height: 10px; }
        ::-webkit-scrollbar-track { background: #f0fdf4; border-radius: 5px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 5px; border: 2px solid #f0fdf4; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }

        .animate-in { animation: fadeIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        /* ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* ê²Œì„ ìŠ¤íƒ€ì¼ ìœ í‹¸ë¦¬í‹° */
        .game-shadow {
            box-shadow: 4px 4px 0px 0px rgba(15, 23, 42, 0.1);
        }
        .game-shadow-hover:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px 0px rgba(15, 23, 42, 0.15);
        }
        .game-border {
            border: 2px solid #e2e8f0;
        }
        .game-btn {
            transition: all 0.1s;
        }
        .game-btn:active {
            transform: translateY(2px);
            box-shadow: none !important;
        }
        /* ë°°ê²½ íŒ¨í„´ ìˆ˜ì • (ì•„ì£¼ ì—°í•˜ê²Œ) */
        .bg-grid-pattern {
            background-image: radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3b82f6;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-800 antialiased bg-grid-pattern">
    <div id="root"></div>

    <!-- React Application Logic -->
    <script type="text/babel" data-type="module" data-presets="react">
        import React, { useState, useEffect, useCallback, useRef } from 'https://esm.sh/react@18.2.0?dev';
        import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client?dev';
        import { 
            Menu, X, Star, User, ChevronRight, Bell, Search, 
            Activity, Cpu, Zap, FlaskConical, BookOpen, Globe, 
            Plus, MessageSquare, Code, ArrowRight, Play, Settings,
            Link, Share2, LogIn, LogOut, Lock, Download, ExternalLink, Users, ChevronDown, Gamepad2, RefreshCw,
            Database, Key, Bot, GitBranch, Layers, ShieldCheck, Copy, Check, Terminal, FileText,
            Image, Video, Mic, UploadCloud, Maximize2, ArrowLeft, MousePointer, Mail, Clock, Split, Box, Library, Move
        } from 'https://esm.sh/lucide-react@0.292.0?dev';

        // =================================================================================================
        // [SECTION 1] CONSTANTS & MOCK DATA (ìƒìˆ˜ ë° ë”ë¯¸ ë°ì´í„°)
        // =================================================================================================

        const GAME_LIST = ['ë©”ì´í”ŒìŠ¤í† ë¦¬', 'ë§ˆë¹„ë…¸ê¸°', 'ë˜ì „ì•¤íŒŒì´í„°', 'FCì˜¨ë¼ì¸', 'ë°”ëŒì˜ë‚˜ë¼', 'ì¹´íŠ¸ë¼ì´ë”: ë“œë¦¬í”„íŠ¸'];

        const MAIN_MENUS = [
            { name: 'ê°œë°œì ì½˜ì†”', icon: null, domain: 'skills.nexon.com/console', desc: 'ë‚´ AI ìŠ¤í‚¬ë“¤ì˜ í˜„í™©ì„ í•œëˆˆì—', authRequired: true },
            { name: 'ìŠ¤í‚¬ íŠ¸ë Œë“œ', icon: null, domain: 'skills.nexon.com/news', desc: 'ê°€ì¥ ë¹ ë¥¸ AI ê¸°ìˆ  íŠ¸ë Œë“œ' },
            { name: 'ìŠ¤í‚¬ ê°€ì´ë“œ', icon: null, domain: 'skills.nexon.com/docs', desc: 'ê°œë°œì„ ë•ëŠ” ì¹œì ˆí•œ ê¸¸ì¡ì´' },
            { name: 'AI ì‹¤í—˜ì‹¤', icon: FlaskConical, domain: 'skills.nexon.com/labs', desc: 'ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” AI ì‹¤í—˜ì‹¤' },
            { name: 'AI ì›Œí¬í”Œë¡œìš°', icon: Zap, domain: 'skills.nexon.com/workflows', desc: 'ë³µì¡í•œ ì—…ë¬´ë¥¼ ìë™ìœ¼ë¡œ ì—°ê²°' },
        ];

        const NEWS_ITEMS = [
            { category: 'Model Update', title: 'OpenAI, ì¶”ë¡  ëŠ¥ë ¥ì´ ë¹„ì•½ì ìœ¼ë¡œ ìƒìŠ¹í•œ ì‹ ëª¨ë¸ ì¶œì‹œ', date: '1ì‹œê°„ ì „', content: `OpenAIê°€ ìƒˆë¡œìš´ AI ëª¨ë¸ì„ ê³µê°œí–ˆìŠµë‹ˆë‹¤...` },
            { category: 'Industry', title: 'ì—”ë¹„ë””ì•„, ì°¨ì„¸ëŒ€ ë¸”ë™ì›° ì¹© ìƒì‚°ëŸ‰ í™•ëŒ€ ë°œí‘œ', date: '3ì‹œê°„ ì „', content: `ì—”ë¹„ë””ì•„(Nvidia)ê°€ ì°¨ì„¸ëŒ€ AI ì¹©...` },
            { category: 'Tutorial', title: 'RAG ì•„í‚¤í…ì²˜ë¥¼ ìµœì í™”í•˜ëŠ” 5ê°€ì§€ í•µì‹¬ ê¸°ë²•', date: 'ì–´ì œ', content: `ê²€ìƒ‰ ì¦ê°• ìƒì„±(RAG) ì‹œìŠ¤í…œì˜...` },
            { category: 'Community', title: 'NEXON Skills ê°œë°œì ë°‹ì—…: ì„œìš¸ 2026 ì°¸ê°€ ì‹ ì²­ ì•ˆë‚´', date: '2ì¼ ì „', content: `êµ­ë‚´ ìµœëŒ€ AI ì—ì´ì „íŠ¸ ê°œë°œì ì»¤ë®¤ë‹ˆí‹°...` },
        ];

        const FAVORITES_ITEMS = [ 
            { type: 'Agent', title: 'Code Reviewer Pro', desc: 'GitHub PRì„ ë¶„ì„í•˜ì—¬ ì ì¬ì ì¸ ë²„ê·¸ì™€ ì„±ëŠ¥ ì´ìŠˆë¥¼ ì½”ë©˜íŠ¸ë¡œ ë‚¨ê¹ë‹ˆë‹¤.', author: 'DevTools', stars: 1800 }, 
            { type: 'Connector', title: 'Notion to Slack', desc: 'ë…¸ì…˜ í˜ì´ì§€ ë³€ê²½ ì‚¬í•­ì„ ìŠ¬ë™ ì±„ë„ë¡œ ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡í•©ë‹ˆë‹¤.', author: 'Connectify', stars: 850 }, 
            { type: 'Workflow', title: 'Daily News Summary', desc: 'ë§¤ì¼ ì•„ì¹¨ 30ë¶„, ì£¼ìš” ë‰´ìŠ¤ ì‚¬ì´íŠ¸ë¥¼ í¬ë¡¤ë§í•˜ì—¬ ìš”ì•½ ë¦¬í¬íŠ¸ë¥¼ ë©”ì¼ë¡œ ë°œì†¡í•©ë‹ˆë‹¤.', author: 'NEXON Skills Official', stars: 3200 }, 
            { type: 'Agent', title: 'SQL Query Assistant', desc: 'ìì—°ì–´ë¥¼ ì…ë ¥í•˜ë©´ ìµœì í™”ëœ SQL ì¿¼ë¦¬ë¡œ ë³€í™˜í•´ì£¼ëŠ” ë°ì´í„° ë¶„ì„ ë³´ì¡° ë„êµ¬ì…ë‹ˆë‹¤.', author: 'DataTeam', stars: 2100 } 
        ];

        const HOME_INITIAL_ITEMS = [ 
            { type: 'Agent', title: 'Data Wizard Bot', desc: 'ë³µì¡í•œ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¯¸ë‹ˆë§µì²˜ëŸ¼ í•œëˆˆì— íŒŒì•…í•˜ê³  ì‹œê°í™”í•©ë‹ˆë‹¤.', author: 'DataGuild', stars: 1240 }, 
            { type: 'Connector', title: 'Notion Guild Messenger', desc: 'ë…¸ì…˜ í˜ì´ì§€ ë³€ê²½ ì‚¬í•­ì„ ê¸¸ë“œ ì±„ë„(ìŠ¬ë™)ë¡œ ì‹¤ì‹œê°„ ì•Œë¦¼ ì „ì†¡í•©ë‹ˆë‹¤.', author: 'Connectify', stars: 850 }, 
            { type: 'Workflow', title: 'Daily Quest Summary', desc: 'ë§¤ì¼ ì•„ì¹¨ 30ë¶„, ì£¼ìš” ë‰´ìŠ¤ í€˜ìŠ¤íŠ¸ë¥¼ í´ë¦¬ì–´í•˜ê³  ìš”ì•½ ë¦¬í¬íŠ¸ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.', author: 'NEXON Skills Official', stars: 3200 }, 
            { type: 'Agent', title: 'Code Reviewer Pro', desc: 'GitHub PRì„ ë¶„ì„í•˜ì—¬ ì ì¬ì ì¸ ë²„ê·¸ì™€ ì„±ëŠ¥ ì´ìŠˆë¥¼ ì½”ë©˜íŠ¸ë¡œ ë‚¨ê¹ë‹ˆë‹¤.', author: 'DevTools', stars: 1800 }, 
            { type: 'Connector', title: 'Gmail <-> Trello', desc: 'ì¤‘ìš” ë©”ì¼ì„ ìë™ìœ¼ë¡œ íŠ¸ë ë¡œ ì¹´ë“œë¡œ ë³€í™˜í•˜ì—¬ í•  ì¼ ëª©ë¡ì— ì¶”ê°€í•©ë‹ˆë‹¤.', author: 'ProductivityKing', stars: 620 }, 
            { type: 'Workflow', title: 'Insta Marketing Auto', desc: 'íŠ¸ë Œë“œ í‚¤ì›Œë“œë¥¼ ë¶„ì„í•˜ì—¬ ì¸ìŠ¤íƒ€ê·¸ë¨ í¬ìŠ¤íŒ… ë¬¸êµ¬ì™€ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³  ì—…ë¡œë“œí•©ë‹ˆë‹¤.', author: 'MarketingAI', stars: 940 } 
        ];

        // =================================================================================================
        // [SECTION 2] SHARED UI COMPONENTS (ê³µìš© ì»´í¬ë„ŒíŠ¸)
        // =================================================================================================

        const DomainTooltip = ({ title, domain }) => (
            <div className="absolute opacity-0 group-hover:opacity-100 transition-all duration-200 top-full mt-3 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-slate-900 text-white rounded-xl shadow-xl z-50 pointer-events-none min-w-[max-content] text-center border-2 border-white">
                <div className="text-sm font-bold mb-0.5 text-yellow-300">{title}</div>
                <div className="text-[11px] text-slate-300 font-mono">{domain}</div>
            </div>
        );

        const NewsThumbnail = ({ category }) => {
            const getColors = () => {
                switch (category) {
                    case 'Model Update': return { bg: 'bg-indigo-100', text: 'text-indigo-600', fill: '#4F46E5', border: 'border-indigo-200' };
                    case 'Industry': return { bg: 'bg-emerald-100', text: 'text-emerald-600', fill: '#059669', border: 'border-emerald-200' };
                    case 'Tutorial': return { bg: 'bg-amber-100', text: 'text-amber-600', fill: '#D97706', border: 'border-amber-200' };
                    default: return { bg: 'bg-rose-100', text: 'text-rose-600', fill: '#E11D48', border: 'border-rose-200' };
                }
            };
            const colors = getColors();
            const renderGraphic = () => {
                if (category === 'Model Update') return <svg viewBox="0 0 100 100" className="w-full h-full p-8 opacity-90"><circle cx="50" cy="50" r="30" fill={colors.fill} opacity="0.2"/><path d="M50 20 L80 50 L50 80 L20 50 Z" fill="none" stroke={colors.fill} strokeWidth="6" strokeLinejoin="round"/><circle cx="50" cy="50" r="10" fill={colors.fill}/><circle cx="50" cy="20" r="4" fill={colors.fill}/><circle cx="80" cy="50" r="4" fill={colors.fill}/><circle cx="50" cy="80" r="4" fill={colors.fill}/><circle cx="20" cy="50" r="4" fill={colors.fill}/></svg>;
                if (category === 'Industry') return <svg viewBox="0 0 100 100" className="w-full h-full p-8 opacity-90"><rect x="20" y="40" width="20" height="40" rx="4" fill={colors.fill} opacity="0.6"/><rect x="45" y="25" width="20" height="55" rx="4" fill={colors.fill} opacity="0.8"/><rect x="70" y="35" width="20" height="45" rx="4" fill={colors.fill} opacity="0.4"/><line x1="10" y1="90" x2="90" y2="90" stroke={colors.fill} strokeWidth="6" strokeLinecap="round"/></svg>;
                if (category === 'Tutorial') return <svg viewBox="0 0 100 100" className="w-full h-full p-8 opacity-90"><rect x="25" y="20" width="50" height="60" rx="8" fill="none" stroke={colors.fill} strokeWidth="6"/><line x1="35" y1="35" x2="65" y2="35" stroke={colors.fill} strokeWidth="6" strokeLinecap="round" opacity="0.6"/><line x1="35" y1="50" x2="65" y2="50" stroke={colors.fill} strokeWidth="6" strokeLinecap="round" opacity="0.6"/><line x1="35" y1="65" x2="50" y2="65" stroke={colors.fill} strokeWidth="6" strokeLinecap="round" opacity="0.6"/><circle cx="75" cy="80" r="12" fill={colors.fill} /><path d="M71 80 L74 83 L79 77" fill="none" stroke="white" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/></svg>;
                return <svg viewBox="0 0 100 100" className="w-full h-full p-8 opacity-90"><circle cx="50" cy="40" r="15" fill={colors.fill}/><path d="M25 80 Q50 60 75 80" fill="none" stroke={colors.fill} strokeWidth="10" strokeLinecap="round"/><circle cx="25" cy="50" r="8" fill={colors.fill} opacity="0.5"/><circle cx="75" cy="50" r="8" fill={colors.fill} opacity="0.5"/></svg>;
            };
            return (
                <div className={`aspect-video ${colors.bg} rounded-3xl mb-4 overflow-hidden relative border-2 ${colors.border} group-hover:scale-105 transition-transform duration-300`}>
                    <div className="absolute inset-0 flex items-center justify-center">{renderGraphic()}</div>
                    <div className="absolute top-4 left-4 bg-white/95 backdrop-blur px-3 py-1.5 rounded-full text-[11px] font-bold text-slate-800 uppercase tracking-wider shadow-sm border border-slate-100">{category}</div>
                </div>
            );
        };

        const ItemDetailModal = ({ item, onClose, isLoggedIn, setShowLoginScreen }) => {
            if (!item) return null;

            const handleActionClick = () => {
                if (!isLoggedIn) {
                    onClose();
                    setShowLoginScreen(true);
                } else {
                    const action = item.type === 'News' ? 'ê³µìœ ' : 'ì ìš©';
                    alert(`${item.title}ì„(ë¥¼) ${action}í•©ë‹ˆë‹¤!`);
                }
            };

            const getGradient = (type) => {
                switch(type) {
                    case 'Agent': return 'bg-blue-500';
                    case 'Connector': return 'bg-purple-500';
                    case 'News': return 'bg-indigo-500';
                    case 'Workflow': return 'bg-orange-500';
                    default: return 'bg-slate-500';
                }
            };

            const getIcon = (type) => {
                switch(type) {
                    case 'Agent': return 'ğŸ¤–';
                    case 'Connector': return 'ğŸ”—';
                    case 'News': return 'ğŸ“°';
                    case 'Workflow': return 'âš¡';
                    default: return 'ğŸ“¦';
                }
            };

            return (
                <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in" onClick={onClose}>
                    <div className="bg-white rounded-[32px] shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative border-4 border-slate-900" onClick={e => e.stopPropagation()}>
                        <div className={`h-36 w-full ${getGradient(item.type)} relative overflow-hidden`}>
                             <div className="absolute inset-0 opacity-20" style={{backgroundImage: 'radial-gradient(circle, white 2px, transparent 2px)', backgroundSize: '20px 20px'}}></div>
                            <button onClick={onClose} className="absolute top-6 right-6 bg-black/20 hover:bg-black/40 text-white p-2 rounded-full transition-colors backdrop-blur-sm">
                                <X size={24} strokeWidth={3} />
                            </button>
                            <div className="absolute -bottom-10 left-8">
                                <div className="w-20 h-20 bg-white rounded-3xl shadow-[4px_4px_0px_rgba(0,0,0,0.1)] p-2 flex items-center justify-center text-4xl border-4 border-slate-50 animate-float">
                                    {getIcon(item.type)}
                                </div>
                            </div>
                        </div>
                        <div className="pt-14 px-8 pb-8">
                            <div className="flex justify-between items-start mb-6">
                                <div>
                                    <div className="flex items-center gap-2 mb-2">
                                        <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide bg-slate-100 text-slate-600 border border-slate-200`}>
                                            {item.type}
                                        </span>
                                        {item.type !== 'News' && <span className="bg-green-100 text-green-700 border border-green-200 px-2 py-0.5 rounded-full text-xs font-bold font-mono">v1.2.0</span>}
                                    </div>
                                    <h2 className="text-3xl font-bold text-slate-900 leading-tight mb-2">{item.title}</h2>
                                    <div className="flex items-center gap-2 text-sm text-slate-500">
                                        <span className="font-semibold text-slate-700 bg-slate-100 px-2 py-0.5 rounded-md">@{item.author}</span>
                                        {item.stars !== undefined && (
                                            <>
                                                <span>â€¢</span>
                                                <div className="flex items-center gap-1 text-yellow-500 font-semibold">
                                                    <Star size={16} fill="currentColor" strokeWidth={3} />
                                                    <span className="text-slate-600">{(item.stars / 1000).toFixed(1)}k Users</span>
                                                </div>
                                            </>
                                        )}
                                    </div>
                                </div>
                                <div className="flex gap-2">
                                    <button className="p-3 border-2 border-slate-200 rounded-2xl hover:bg-slate-50 text-slate-500 game-btn"><Share2 size={24} strokeWidth={2.5}/></button>
                                    <button className="p-3 border-2 border-slate-200 rounded-2xl hover:bg-slate-50 text-slate-500 game-btn"><Star size={24} strokeWidth={2.5}/></button>
                                </div>
                            </div>
                            <div className="bg-slate-50 p-6 rounded-2xl border-2 border-slate-100 mb-8">
                                <p className="text-slate-600 text-lg leading-relaxed whitespace-pre-line font-normal">
                                    {item.desc}
                                </p>
                                {item.type !== 'News' && (
                                    <div className="mt-4 pt-4 border-t-2 border-dashed border-slate-200">
                                        <span className="text-sm text-slate-400 font-normal">
                                            â„¹ï¸ ì´ ìŠ¤í‚¬ì„ ì¥ì°©í•˜ë©´ ê°œë°œ/ìš´ì˜ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                                            ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ ì‰´ë“œë¥¼ ì¤€ìˆ˜í•˜ë©°, ë¼ì´ë¸Œ ì„œë¹„ìŠ¤ íŒŒì´í”„ë¼ì¸ê³¼ ì™„ë²½í•˜ê²Œ í†µí•©ë©ë‹ˆë‹¤.
                                        </span>
                                    </div>
                                )}
                            </div>
                            <div className="flex flex-col sm:flex-row gap-3">
                                <button 
                                    onClick={handleActionClick}
                                    className="game-btn flex-1 bg-blue-600 text-white py-4 rounded-2xl font-bold text-lg hover:bg-blue-700 shadow-[0px_4px_0px_#1e40af] active:shadow-none active:translate-y-[4px] flex items-center justify-center gap-2 transition-all"
                                >
                                    {item.type === 'Workflow' ? <Play size={20} fill="currentColor" strokeWidth={3}/> : item.type === 'News' ? <Share2 size={20} strokeWidth={3}/> : <Download size={20} strokeWidth={3}/>}
                                    {item.type === 'News' ? 'ê³µìœ í•˜ê¸°' : 'ìŠ¤í‚¬ ì¥ì°©í•˜ê¸°'}
                                </button>
                                <button className="game-btn px-8 py-4 border-2 border-slate-200 text-slate-700 rounded-2xl font-bold hover:bg-slate-50 shadow-[0px_4px_0px_#e2e8f0] active:shadow-none active:translate-y-[4px] transition-all">
                                    {item.type === 'News' ? 'ì›ë¬¸ ë³´ê¸°' : 'ë§¤ë‰´ì–¼ ë³´ê¸°'}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const CreateSelectionModal = ({ onClose }) => (
            <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in" onClick={onClose}>
                <div className="bg-white rounded-[32px] shadow-2xl w-full max-w-3xl overflow-hidden relative border-4 border-slate-900" onClick={e => e.stopPropagation()}>
                    <div className="p-8">
                        <div className="flex justify-between items-start mb-8">
                            <div>
                                <h2 className="text-3xl font-bold text-slate-900">ìƒˆë¡œìš´ ìŠ¤í‚¬ ì œì‘</h2>
                                <p className="text-slate-500 mt-2 font-normal">ìƒì„±í•  ìŠ¤í‚¬ì˜ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
                            </div>
                            <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full transition-colors"><X size={28} className="text-slate-400" strokeWidth={3}/></button>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                            {[
                                { title: 'ì»¤ë„¥í„°', icon: Database, desc: 'API, DB ë“± ì™¸ë¶€ ì›”ë“œì˜ ë°ì´í„° ì†ŒìŠ¤ì™€ ì—°ê²°í•©ë‹ˆë‹¤.', color: 'bg-blue-50 text-blue-600 border-blue-200' },
                                { title: 'ì—ì´ì „íŠ¸', icon: Bot, desc: 'ëª©í‘œë¥¼ ì´í•´í•˜ê³  ììœ¨ì ìœ¼ë¡œ íŒë‹¨í•˜ì—¬ ë³µì¡í•œ ì‘ì—…ì„ ëŒ€í–‰í•©ë‹ˆë‹¤.', color: 'bg-purple-50 text-purple-600 border-purple-200' },
                                { title: 'ì›Œí¬í”Œë¡œìš°', icon: GitBranch, desc: 'ì—¬ëŸ¬ ìŠ¤í‚¬ì„ ì½¤ë³´ë¡œ ì—°ê²°í•˜ì—¬ ì‘ì—…ì„ ìë™í™”í•©ë‹ˆë‹¤.', color: 'bg-orange-50 text-orange-600 border-orange-200' },
                            ].map((opt, i) => (
                                <button key={i} className="game-btn group flex flex-col items-start p-6 rounded-3xl border-2 border-slate-100 hover:border-blue-500 shadow-sm hover:shadow-[0px_4px_0px_#3b82f6] transition-all text-left bg-white active:translate-y-1 active:shadow-none">
                                    <div className={`p-4 rounded-2xl mb-4 border-2 ${opt.color}`}>
                                        <opt.icon size={28} strokeWidth={2.5} />
                                    </div>
                                    <h3 className="font-bold text-xl text-slate-900 mb-2 group-hover:text-blue-600">{opt.title}</h3>
                                    <p className="text-sm text-slate-500 leading-relaxed mb-6 font-normal">{opt.desc}</p>
                                    <div className="mt-auto flex items-center text-sm font-bold text-slate-300 group-hover:text-blue-600 uppercase tracking-wide">
                                        ì œì‘í•˜ê¸° <ArrowRight size={16} className="ml-1" strokeWidth={3}/>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </div>
                    <div className="bg-slate-50 p-4 border-t-2 border-slate-100 flex justify-end">
                        <button onClick={onClose} className="text-slate-500 font-bold text-sm hover:text-slate-900 px-6 py-3 rounded-xl hover:bg-slate-200 transition-colors">ì·¨ì†Œ</button>
                    </div>
                </div>
            </div>
        );

        const LoginScreen = ({ onClose, onLogin }) => (
            <div className="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300">
                <div className="bg-white rounded-[32px] shadow-2xl w-full max-w-md overflow-hidden relative border-4 border-slate-900">
                    <button onClick={onClose} className="absolute top-4 right-4 text-slate-300 hover:text-slate-600"><X size={28} strokeWidth={3} /></button>
                    <div className="p-10 text-center">
                        <div className="w-20 h-20 bg-blue-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-[4px_4px_0px_#1e40af] border-2 border-blue-600 text-white animate-bounce"><Lock className="w-10 h-10" strokeWidth={3} /></div>
                        <h2 className="text-3xl font-bold text-slate-900 mb-2">Login</h2>
                        <p className="text-slate-500 mb-8 font-medium">ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.<br/>(ì‚¬ë‚´ ê³„ì •ìœ¼ë¡œ ê³„ì†í•˜ê¸°)</p>
                        <form onSubmit={onLogin} className="space-y-4 text-left">
                            <div>
                                <label className="block text-sm font-semibold text-slate-700 mb-2 ml-1">ì•„ì´ë””</label>
                                <input type="text" defaultValue="nexon_dev" className="w-full px-4 py-3.5 rounded-xl border-2 border-slate-200 focus:ring-0 focus:border-blue-500 outline-none transition-all font-medium text-slate-800"/>
                            </div>
                            <div>
                                <label className="block text-sm font-semibold text-slate-700 mb-2 ml-1">ë¹„ë°€ë²ˆí˜¸</label>
                                <input type="password" defaultValue="********" className="w-full px-4 py-3.5 rounded-xl border-2 border-slate-200 focus:ring-0 focus:border-blue-500 outline-none transition-all font-medium text-slate-800"/>
                            </div>
                            <button type="submit" className="game-btn w-full bg-slate-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-slate-800 transition-all transform shadow-[0px_4px_0px_#000] active:shadow-none active:translate-y-[4px] mt-4">ë¡œê·¸ì¸</button>
                        </form>
                        <div className="mt-8 text-xs font-bold text-slate-400 uppercase tracking-widest">Nexon Enterprise Authentication</div>
                    </div>
                </div>
            </div>
        );

        // =================================================================================================
        // [SECTION 3] LAYOUT COMPONENTS (ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸)
        // =================================================================================================

        const GNB = ({ 
            currentTab, isLoggedIn, isMenuOpen, setIsMenuOpen, handleNavClick, 
            handleLogout, setShowLoginScreen, showStickySearch, selectedGame, setSelectedGame, gameList, mainMenus 
        }) => {
            const [logoError, setLogoError] = useState(false);

            return (
                <nav className="bg-white/90 backdrop-blur-md border-b-2 border-slate-100 sticky top-0 z-50">
                    <div className="relative z-20">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex justify-between h-20 items-center">
                                {/* Logo Area */}
                                <div className="flex items-center gap-3 shrink-0 cursor-pointer group relative" onClick={() => handleNavClick('í™ˆ')}>
                                    <div className="relative">
                                        {!logoError ? (
                                            <img src="nexon-skills.webp" alt="NEXON Skills" className="w-10 h-10 object-contain drop-shadow-sm hover:scale-110 transition-transform group-hover:drop-shadow-[0_0_10px_rgba(59,130,246,0.5)]" onError={() => setLogoError(true)} />
                                        ) : (
                                        <div className="w-10 h-10 bg-white rounded-xl shadow-sm border-2 border-slate-200 flex items-center justify-center text-blue-600 group-hover:border-blue-300 transition-colors">
                                            <Zap size={20} fill="currentColor" strokeWidth={0} />
                                        </div>
                                        )}
                                    </div>
                                    <span className="text-xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-slate-900 to-slate-700 transition-all">NEXON Skills</span>
                                    <DomainTooltip title="AI ìŠ¤í‚¬ í†µí•© í”Œë«í¼" domain="skills.nexon.com" />
                                </div>

                                {/* Desktop Navigation */}
                                <div className="hidden md:flex items-center space-x-2 bg-slate-100 p-1.5 rounded-2xl border border-slate-200">
                                    {mainMenus.map((menu) => (
                                        <div key={menu.name} className="relative group">
                                            <button
                                                onClick={() => handleNavClick(menu.name)}
                                                className={`flex items-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-xl transition-all ${
                                                    currentTab === menu.name ? 'text-blue-600 bg-white shadow-sm' : 'text-slate-500 hover:text-slate-900 hover:bg-slate-200/50'
                                                }`}
                                            >
                                                {menu.icon && <menu.icon size={18} className={currentTab === menu.name ? 'text-blue-600' : 'text-slate-400 group-hover:text-slate-600'} strokeWidth={2.5}/>}
                                                {menu.name}
                                                {menu.authRequired && !isLoggedIn && <Lock size={12} className="text-slate-300" />}
                                            </button>
                                            <DomainTooltip title={menu.desc} domain={menu.domain} />
                                        </div>
                                    ))}
                                </div>

                                {/* Right Actions */}
                                <div className="hidden md:flex items-center space-x-4">
                                    <button onClick={() => handleNavClick('ì¦ê²¨ì°¾ê¸°')} className={`transition-all p-2.5 rounded-xl border-2 ${currentTab === 'ì¦ê²¨ì°¾ê¸°' ? 'bg-yellow-50 border-yellow-200 text-yellow-500' : 'bg-white border-slate-100 text-slate-400 hover:border-yellow-200 hover:text-yellow-500'}`} title="ë‚´ ì¦ê²¨ì°¾ê¸°">
                                        <Star size={20} className={currentTab === 'ì¦ê²¨ì°¾ê¸°' ? 'fill-yellow-500' : ''} strokeWidth={2.5} />
                                    </button>
                                    <div className="h-6 w-[2px] bg-slate-100 rounded-full"></div>
                                    {isLoggedIn ? (
                                        <button onClick={handleLogout} className="flex items-center gap-2 bg-white border-2 border-slate-200 text-slate-700 px-4 py-2.5 rounded-2xl text-sm font-semibold hover:bg-slate-50 transition-all shadow-sm group relative">
                                            <div className="w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center border border-slate-200"><User size={14} /></div> <span>Nexon_Dev</span>
                                            <div className="absolute top-full mt-2 right-0 hidden group-hover:block bg-white border-2 border-slate-100 rounded-xl shadow-xl p-2 min-w-[140px] z-50">
                                                <div className="flex items-center gap-2 text-red-500 text-xs font-bold p-2 hover:bg-red-50 rounded-lg"><LogOut size={14}/> ë¡œê·¸ì•„ì›ƒ</div>
                                            </div>
                                        </button>
                                    ) : (
                                        <button onClick={() => setShowLoginScreen(true)} className="game-btn flex items-center gap-2 bg-slate-900 text-white px-5 py-2.5 rounded-2xl text-sm font-bold hover:bg-slate-800 transition-all shadow-[0px_3px_0px_#000] active:shadow-none active:translate-y-[3px]">
                                            <LogIn size={18} strokeWidth={2.5} /> <span>ë¡œê·¸ì¸</span>
                                        </button>
                                    )}
                                </div>

                                {/* Mobile Menu Trigger */}
                                <div className="md:hidden flex items-center">
                                    <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-slate-600 p-2 hover:bg-slate-100 rounded-xl border-2 border-transparent hover:border-slate-200 transition-all">
                                        {isMenuOpen ? <X size={28} strokeWidth={2.5} /> : <Menu size={28} strokeWidth={2.5} />}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Sticky Search Bar */}
                    <div className={`absolute top-0 left-0 w-full bg-white/95 backdrop-blur shadow-md border-b-2 border-slate-100 transition-all duration-300 -z-10 flex justify-center py-4 ${showStickySearch ? 'translate-y-20 opacity-100' : 'translate-y-0 opacity-0'}`}>
                        <div className="flex items-center gap-2 bg-white border-2 border-slate-200 rounded-full p-1.5 pl-6 pr-1.5 shadow-sm max-w-2xl w-full mx-4">
                            <div className="flex items-center gap-2 border-r-2 border-slate-100 pr-4 mr-2">
                                <Gamepad2 size={20} className="text-slate-400"/>
                                <select value={selectedGame} onChange={(e) => setSelectedGame(e.target.value)} className="bg-transparent text-sm font-bold text-slate-700 outline-none cursor-pointer max-w-[100px] truncate hover:text-blue-600">
                                    <option>ì „ì²´ ê²Œì„</option>
                                    {gameList.map(game => <option key={game} value={game}>{game}</option>)}
                                </select>
                            </div>
                            <input type="text" placeholder="ì†Œí™˜í•˜ê³  ì‹¶ì€ ìŠ¤í‚¬ ê²€ìƒ‰..." className="bg-transparent text-sm w-full focus:outline-none font-medium placeholder-slate-400" />
                            <button className="bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 shadow-md transition-transform hover:scale-105"><Search size={18} strokeWidth={3} /></button>
                        </div>
                    </div>

                    {/* Mobile Menu */}
                    {isMenuOpen && (
                        <div className="md:hidden absolute top-20 left-0 w-full bg-white border-b-2 border-slate-200 shadow-2xl z-40 rounded-b-3xl overflow-hidden">
                            <div className="px-4 py-6 space-y-2">
                                {mainMenus.map((menu) => (
                                    <button key={menu.name} onClick={() => handleNavClick(menu.name)} className={`w-full flex justify-between items-center px-5 py-4 text-base font-bold rounded-2xl border-2 ${currentTab === menu.name ? 'bg-blue-50 text-blue-600 border-blue-200' : 'text-slate-700 border-transparent hover:bg-slate-50'}`}>
                                        <div className="flex items-center gap-3">{menu.icon && <menu.icon size={20} strokeWidth={2.5} />} {menu.name}</div>
                                        <div className="flex items-center gap-2">{menu.authRequired && !isLoggedIn && <Lock size={16} className="text-slate-300" />}<ChevronRight size={18} className="text-slate-300" strokeWidth={3} /></div>
                                    </button>
                                ))}
                                <div className="grid grid-cols-2 gap-3 mt-6 pt-6 border-t-2 border-slate-100">
                                    <button className="flex items-center justify-center gap-2 py-4 bg-yellow-50 text-yellow-600 rounded-2xl font-bold border-2 border-yellow-100"><Star size={20} className="fill-yellow-500 text-yellow-500" /> ì¦ê²¨ì°¾ê¸°</button>
                                    {isLoggedIn ? (
                                        <button onClick={handleLogout} className="flex items-center justify-center gap-2 py-4 bg-red-50 text-red-600 rounded-2xl font-bold border-2 border-red-100"><LogOut size={20} strokeWidth={2.5} /> ë¡œê·¸ì•„ì›ƒ</button>
                                    ) : (
                                        <button onClick={() => { setIsMenuOpen(false); setShowLoginScreen(true); }} className="flex items-center justify-center gap-2 py-4 bg-slate-900 text-white rounded-2xl font-bold"><LogIn size={20} strokeWidth={2.5} /> ë¡œê·¸ì¸</button>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </nav>
            );
        };

        // =================================================================================================
        // [SECTION 4] FEATURE COMPONENTS (ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸)
        // =================================================================================================

        const DashboardView = ({ setShowCreateModal }) => (
            <div className="space-y-8 animate-fade-in">
                <div className="flex justify-between items-end bg-white p-6 rounded-[32px] border-2 border-slate-100 shadow-sm">
                    <div>
                        <div className="flex items-center gap-2 mb-1">
                             <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                             <span className="text-xs font-bold text-slate-400 uppercase tracking-wide">Live Status</span>
                        </div>
                        <h2 className="text-3xl font-bold text-slate-900">ëŒ€ì‹œë³´ë“œ</h2>
                        <p className="text-slate-500 font-medium mt-1">ë‚´ ìŠ¤í‚¬ë“¤ì˜ ì‹¤ì‹œê°„ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
                    </div>
                    <button onClick={() => setShowCreateModal(true)} className="game-btn bg-blue-600 text-white px-6 py-3 rounded-2xl text-sm font-bold flex items-center gap-2 hover:bg-blue-700 transition-all shadow-[0px_4px_0px_#1e40af] active:shadow-none active:translate-y-[4px]"><Plus size={20} strokeWidth={3} /> ë¹ ë¥¸ ìŠ¤í‚¬ ìƒì„±</button>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        {[{ label: 'í™œì„± ì„œë¹„ìŠ¤', value: '18', trend: '+3', color: 'bg-blue-50 text-blue-600 border-blue-100' }, { label: 'ê¸ˆì¼ API í˜¸ì¶œ', value: '142.5k', trend: '12%', color: 'bg-purple-50 text-purple-600 border-purple-100' }, { label: 'í‰ê·  ì‘ë‹µ ì‹œê°„', value: '420ms', trend: '-50ms', color: 'bg-green-50 text-green-600 border-green-100' }, { label: 'ì˜ˆìƒ ì²­êµ¬ì•¡', value: 'â‚©125,000', trend: 'â‚©12k', color: 'bg-orange-50 text-orange-600 border-orange-100' }].map((stat, i) => (
                        <div key={i} className={`p-6 rounded-3xl border-2 ${stat.color} game-shadow hover:scale-105 transition-transform bg-white`}>
                            <p className="text-xs text-slate-500 font-semibold uppercase tracking-wider mb-2">{stat.label}</p>
                            <p className="text-3xl font-bold text-slate-900">{stat.value}</p>
                            <div className="inline-flex items-center gap-1 mt-3 px-2 py-1 rounded-lg bg-white/50 border border-black/5">
                                <span className="text-xs font-bold">â–² {stat.trend}</span>
                            </div>
                        </div>
                    ))}
                </div>
                <div className="bg-slate-900 rounded-3xl border-4 border-slate-900 shadow-xl overflow-hidden text-white">
                    <div className="px-6 py-4 border-b border-slate-700 font-bold text-sm flex items-center gap-2 bg-slate-800">
                        <Terminal size={16} className="text-blue-400"/> ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ë¡œê·¸
                    </div>
                    <div className="p-6 text-sm font-mono text-slate-300 space-y-3 bg-slate-900">
                        <div className="flex gap-4"><span className="text-slate-500 select-none">14:20:01</span> <span><span className="text-blue-400 font-bold">[INFO]</span> Agent "ReviewBot" deployed successfully.</span></div>
                        <div className="flex gap-4"><span className="text-slate-500 select-none">14:18:42</span> <span><span className="text-green-400 font-bold">[SUCCESS]</span> Workflow "Daily Sync" completed in 2.4s.</span></div>
                        <div className="flex gap-4"><span className="text-slate-500 select-none">14:15:10</span> <span><span className="text-yellow-400 font-bold">[WARN]</span> High latency detected in "Nexon OpenAPI".</span></div>
                         <div className="flex gap-4 animate-pulse"><span className="text-slate-500 select-none">...</span></div>
                    </div>
                </div>
            </div>
        );

        const ConnectorsView = ({ setSelectedItem }) => {
            const [activeTab, setActiveTab] = useState('ì „ì²´');
            const [searchQuery, setSearchQuery] = useState('');
            const tabs = ['ì „ì²´', 'MCP', 'RAG', 'Public API', 'Private API', 'Admin API', 'Sandbox API', 'NXCommand'];
            const connectors = [
                { name: 'Nexon User Info', type: 'Private API', status: 'Active', endpt: '/api/v1/user' },
                { name: 'Maple Inventory', type: 'Sandbox API', status: 'Dev', endpt: '/sandbox/maple/inv' },
                { name: 'Slack Notifier', type: 'MCP', status: 'Active', endpt: 'mcp://slack-bot' },
                { name: 'Internal Wiki RAG', type: 'RAG', status: 'Indexing', endpt: 'vec://wiki-prod' },
                { name: 'Global Weather', type: 'Public API', status: 'Active', endpt: 'api.weather.com' },
                { name: 'Server Restart Cmd', type: 'NXCommand', status: 'Active', endpt: 'cmd://restart-server' },
            ];
            const filtered = connectors.filter(c => (activeTab === 'ì „ì²´' || c.type === activeTab) && c.name.toLowerCase().includes(searchQuery.toLowerCase()));

            return (
                <div className="space-y-6 animate-fade-in">
                    <div><h2 className="text-3xl font-bold text-slate-900">ë‚´ ì»¤ë„¥í„°</h2><p className="text-slate-500 text-sm mt-2 font-medium leading-relaxed">MCP ë° RAG ê¸°ë°˜ì˜ ì°¨ì„¸ëŒ€ ì—°ê²° ë°©ì‹ì€ ë¬¼ë¡ , ê¸°ì¡´ APIì™€ NXCommand ì‹¤í–‰ê¹Œì§€ ì§€ì›í•©ë‹ˆë‹¤.<br className="hidden md:block"/> íŒŒí¸í™”ëœ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ ë‹¨ì¼ í—ˆë¸Œì—ì„œ í†µí•© ê´€ë¦¬í•˜ì„¸ìš”.</p></div>
                    <div className="relative"><Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} /><input type="text" className="w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-2xl text-sm focus:outline-none focus:border-blue-500 font-medium transition-colors" placeholder="ì»¤ë„¥í„° ì´ë¦„ì„ ê²€ìƒ‰í•˜ì„¸ìš”..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} /></div>
                    <div className="flex gap-2 overflow-x-auto pb-4 border-b-2 border-slate-100 no-scrollbar">{tabs.map(tab => (<button key={tab} onClick={() => setActiveTab(tab)} className={`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all border-2 ${activeTab === tab ? 'bg-slate-900 text-white border-slate-900 shadow-md' : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50 hover:border-slate-300'}`}>{tab}</button>))}</div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {filtered.map((item, idx) => (
                            <div key={idx} onClick={() => setSelectedItem({ type: item.type, title: item.name, desc: `Endpoint: ${item.endpt}\nStatus: ${item.status}\n\nì´ ì»¤ë„¥í„°ëŠ” ${item.type} íƒ€ì…ìœ¼ë¡œ, ì•ˆì •ì ì¸ ë°ì´í„° ì—°ê²°ì„ ì œê³µí•©ë‹ˆë‹¤.`, author: 'My Org', stars: 120 + idx })} className="bg-white p-6 rounded-3xl border-2 border-slate-100 game-shadow game-shadow-hover transition-all flex flex-col gap-4 cursor-pointer group">
                                <div className="flex justify-between items-start"><span className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${item.type === 'MCP' ? 'bg-purple-100 text-purple-700 border-purple-200' : item.type === 'RAG' ? 'bg-orange-100 text-orange-700 border-orange-200' : item.type === 'NXCommand' ? 'bg-red-100 text-red-700 border-red-200' : 'bg-blue-100 text-blue-700 border-blue-200'}`}>{item.type}</span><div className={`w-3 h-3 rounded-full border-2 border-white shadow-sm ${item.status === 'Active' ? 'bg-green-500' : 'bg-yellow-400'}`}></div></div>
                                <div><h3 className="font-bold text-lg text-slate-900 group-hover:text-blue-600 transition-colors">{item.name}</h3><p className="text-xs text-slate-400 font-mono mt-1 truncate bg-slate-50 p-1.5 rounded-lg border border-slate-100">{item.endpt}</p></div>
                                <div className="mt-auto pt-4 border-t-2 border-slate-50 flex justify-end gap-2"><button className="px-3 py-1.5 rounded-lg bg-slate-50 text-xs font-bold text-slate-500 hover:bg-slate-100">Config</button><button className="px-3 py-1.5 rounded-lg bg-blue-50 text-xs font-bold text-blue-600 hover:bg-blue-100">Test</button></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const AgentsView = ({ setSelectedItem }) => {
            const [activeTab, setActiveTab] = useState('ì „ì²´');
            const [searchQuery, setSearchQuery] = useState('');
            const tabs = ['ì „ì²´', 'Custom', 'AI Studio', 'Gemini', 'Snowflake', 'ChatGPT', 'Claude'];
            const agents = [
                { name: 'CS Responder', vendor: 'Gemini', model: 'Gemini 3 Pro', status: 'Running' },
                { name: 'Data Analyst', vendor: 'Snowflake', model: 'Cortex Llama', status: 'Paused' },
                { name: 'Creative Writer', vendor: 'Claude', model: 'Claude 3.6 Opus', status: 'Running' },
                { name: 'Legacy Bot', vendor: 'Custom', model: 'In-house BERT', status: 'Stopped' },
            ];
            const filtered = agents.filter(a => (activeTab === 'ì „ì²´' || a.vendor === activeTab) && a.name.toLowerCase().includes(searchQuery.toLowerCase()));

            return (
                <div className="space-y-6 animate-fade-in">
                    <div><h2 className="text-3xl font-bold text-slate-900">ë‚´ ì—ì´ì „íŠ¸</h2><p className="text-slate-500 text-sm mt-2 font-medium leading-relaxed">ì§ì ‘ ê°œë°œí•œ Custom ë´‡, AI ì‹¤í—˜ì‹¤ì˜ ì°½ì‘ë¬¼, ê·¸ë¦¬ê³  ì£¼ìš” ë²¤ë”ì˜ ìƒìš© ì—ì´ì „íŠ¸ê¹Œì§€.<br className="hidden md:block"/> í©ì–´ì ¸ ìˆëŠ” AI ë„êµ¬ë¥¼ í•œ ê³³ì—ì„œ ì¡°íšŒí•˜ê³  ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div>
                    <div className="relative"><Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} /><input type="text" className="w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-2xl text-sm focus:outline-none focus:border-blue-500 font-medium transition-colors" placeholder="ì—ì´ì „íŠ¸ ì´ë¦„ì„ ê²€ìƒ‰í•˜ì„¸ìš”..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} /></div>
                    <div className="flex gap-2 overflow-x-auto pb-4 border-b-2 border-slate-100 no-scrollbar">{tabs.map(tab => (<button key={tab} onClick={() => setActiveTab(tab)} className={`px-4 py-2 rounded-xl text-xs font-bold whitespace-nowrap transition-all border-2 ${activeTab === tab ? 'bg-slate-900 text-white border-slate-900 shadow-md' : 'bg-white text-slate-500 border-slate-200 hover:bg-slate-50 hover:border-slate-300'}`}>{tab}</button>))}</div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {filtered.map((item, idx) => (
                            <div key={idx} onClick={() => setSelectedItem({ type: 'Agent', title: item.name, desc: `Model: ${item.model}\nVendor: ${item.vendor}\nStatus: ${item.status}\n\nì´ ì—ì´ì „íŠ¸ëŠ” ${item.vendor}ì˜ ${item.model} ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.`, author: item.vendor, stars: 500 + idx * 10 })} className="bg-white p-6 rounded-3xl border-2 border-slate-100 game-shadow game-shadow-hover transition-all group cursor-pointer">
                                <div className="flex items-center gap-4 mb-4"><div className="w-12 h-12 bg-gradient-to-br from-slate-100 to-slate-50 border-2 border-slate-100 rounded-2xl flex items-center justify-center text-2xl shadow-sm">{item.vendor === 'Gemini' ? 'âœ¨' : item.vendor === 'Claude' ? 'ğŸ§ ' : item.vendor === 'Snowflake' ? 'â„ï¸' : 'ğŸ¤–'}</div><div><h3 className="font-bold text-lg text-slate-900 group-hover:text-blue-600 transition-colors">{item.name}</h3><p className="text-xs font-bold text-slate-400 mt-1">{item.vendor} â€¢ {item.model}</p></div></div>
                                <div className="flex justify-between items-center text-xs mt-2"><span className={`px-3 py-1 rounded-full font-bold border ${item.status === 'Running' ? 'bg-green-50 text-green-700 border-green-200' : 'bg-slate-100 text-slate-500 border-slate-200'}`}>{item.status}</span><button className="text-slate-300 hover:text-slate-600 transition-colors bg-slate-50 p-2 rounded-lg"><Settings size={16}/></button></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const WorkflowsView = ({ setSelectedItem }) => {
            const [searchQuery, setSearchQuery] = useState('');
            const [activeFilter, setActiveFilter] = useState('ì „ì²´');
            const workflows = [
                { name: 'Email Summary to Slack', nodes: 5, runs: 120, status: 'Active' },
                { name: 'Jira Issue Classifier', nodes: 12, runs: 450, status: 'Active' },
                { name: 'Weekly Report Generator', nodes: 8, runs: 4, status: 'Draft' },
            ];
            const filtered = workflows.filter(wf => (activeFilter === 'ì „ì²´' || wf.status === activeFilter) && wf.name.toLowerCase().includes(searchQuery.toLowerCase()));

            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="flex justify-between items-end"><div><h2 className="text-3xl font-bold text-slate-900">ë‚´ ì›Œí¬í”Œë¡œìš°</h2><p className="text-slate-500 text-sm mt-2 font-medium leading-relaxed">ë¹„ì£¼ì–¼ ë¹Œë”ë¡œ ì„¤ê³„ëœ ìë™í™” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. <br className="hidden md:block"/> ì‹¤ì‹œê°„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³ , ê²€ì¦ëœ ì›Œí¬í”Œë¡œìš°ë¥¼ ì¡°ì§ ë‚´ ìì‚°ìœ¼ë¡œ ë°°í¬í•˜ì„¸ìš”.</p></div><div className="flex gap-2 text-sm text-slate-500 bg-slate-100 p-1.5 rounded-xl shrink-0 border border-slate-200"><button onClick={() => setActiveFilter('ì „ì²´')} className={`px-4 py-1.5 rounded-lg font-bold transition-all ${activeFilter === 'ì „ì²´' ? 'bg-white shadow-sm text-slate-900' : 'hover:text-slate-900'}`}>ì „ì²´</button><button onClick={() => setActiveFilter('Active')} className={`px-4 py-1.5 rounded-lg font-bold transition-all ${activeFilter === 'Active' ? 'bg-white shadow-sm text-slate-900' : 'hover:text-slate-900'}`}>Active</button><button onClick={() => setActiveFilter('Draft')} className={`px-4 py-1.5 rounded-lg font-bold transition-all ${activeFilter === 'Draft' ? 'bg-white shadow-sm text-slate-900' : 'hover:text-slate-900'}`}>Draft</button></div></div>
                    <div className="relative"><Search className="absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} /><input type="text" className="w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-2xl text-sm focus:outline-none focus:border-blue-500 font-medium transition-colors" placeholder="ì›Œí¬í”Œë¡œìš° ì´ë¦„ì„ ê²€ìƒ‰í•˜ì„¸ìš”..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} /></div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {filtered.map((wf, idx) => (
                            <div key={idx} onClick={() => setSelectedItem({ type: 'Workflow', title: wf.name, desc: `Nodes: ${wf.nodes}\nRuns: ${wf.runs}\nStatus: ${wf.status}\n\nì´ ì›Œí¬í”Œë¡œìš°ëŠ” ${wf.nodes}ê°œì˜ ë…¸ë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì´ ${wf.runs}íšŒ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.`, author: 'Workflow Bot', stars: wf.runs })} className="bg-white border-2 border-slate-100 rounded-[2rem] p-0 overflow-hidden game-shadow game-shadow-hover transition-all cursor-pointer group">
                                <div className="h-36 bg-slate-50 relative p-4 flex items-center justify-center overflow-hidden border-b-2 border-slate-100 group-hover:bg-blue-50/50 transition-colors"><div className="absolute inset-0 opacity-20" style={{backgroundImage: 'radial-gradient(#94a3b8 2px, transparent 2px)', backgroundSize: '16px 16px'}}></div><div className="flex items-center gap-3 relative z-10"><div className="w-10 h-10 bg-white rounded-xl shadow-sm border-2 border-slate-200 flex items-center justify-center text-[10px] font-bold">Trigger</div><div className="w-6 h-1 bg-slate-300 rounded-full"></div><div className="w-10 h-10 bg-blue-500 rounded-xl shadow-sm border-2 border-blue-600 flex items-center justify-center text-white text-[10px] font-bold">LLM</div><div className="w-6 h-1 bg-slate-300 rounded-full"></div><div className="w-10 h-10 bg-white rounded-xl shadow-sm border-2 border-slate-200 flex items-center justify-center text-[10px] font-bold">Act</div></div></div>
                                <div className="p-5"><div className="flex justify-between items-start mb-3"><h3 className="font-bold text-slate-900 text-lg group-hover:text-blue-600 transition-colors">{wf.name}</h3><div className={`w-3 h-3 rounded-full mt-1.5 border-2 border-white shadow-sm ${wf.status === 'Active' ? 'bg-green-500' : 'bg-slate-300'}`}></div></div><div className="flex items-center gap-4 text-xs text-slate-500 font-bold"><span className="flex items-center gap-1.5 bg-slate-100 px-2 py-1 rounded-md"><Layers size={14}/> {wf.nodes} Nodes</span><span className="flex items-center gap-1.5 bg-slate-100 px-2 py-1 rounded-md"><Play size={14}/> {wf.runs} Runs</span></div></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const CredentialsView = ({ setSelectedItem }) => (
            <div className="space-y-6 animate-fade-in">
                <h2 className="text-3xl font-bold text-slate-900">ë‚´ í¬ë¦¬ë´ì…œ</h2>
                <div className="bg-white border-2 border-slate-200 rounded-[2rem] overflow-hidden shadow-sm">
                    <table className="w-full text-sm text-left"><thead className="bg-slate-50 text-slate-500 font-semibold border-b-2 border-slate-100 uppercase tracking-wider"><tr><th className="px-6 py-5">Name</th><th className="px-6 py-5">Key Prefix</th><th className="px-6 py-5">Created</th><th className="px-6 py-5">Last Used</th><th className="px-6 py-5 text-right">Action</th></tr></thead>
                        <tbody className="divide-y-2 divide-slate-50">
                            {[{ name: 'Prod API Key', prefix: 'nk_prod_...', created: '2025-01-10', used: 'Just now' }, { name: 'Dev Test Key', prefix: 'nk_dev_...', created: '2025-02-15', used: '2 days ago' }, { name: 'Legacy Key 2024', prefix: 'nk_old_...', created: '2024-11-20', used: 'Inactive' }].map((key, i) => (
                                <tr key={i} onClick={() => setSelectedItem({ type: 'Credential', title: key.name, desc: `Prefix: ${key.prefix}\nCreated: ${key.created}\nLast Used: ${key.used}\n\në³´ì•ˆ í‚¤ ì •ë³´ì…ë‹ˆë‹¤. íƒ€ì¸ì—ê²Œ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.`, author: 'System', stars: 0 })} className="hover:bg-blue-50/50 cursor-pointer transition-colors">
                                    <td className="px-6 py-5 font-bold text-slate-900 flex items-center gap-3"><div className="p-2 bg-blue-100 text-blue-600 rounded-lg"><ShieldCheck size={18}/></div>{key.name}</td><td className="px-6 py-5 font-mono text-slate-500 font-medium bg-slate-50/50">{key.prefix}</td><td className="px-6 py-5 text-slate-500 font-medium">{key.created}</td><td className="px-6 py-5 text-slate-500 font-medium">{key.used}</td><td className="px-6 py-5 text-right"><button className="text-slate-400 hover:text-blue-600 transition-colors p-2 hover:bg-blue-100 rounded-lg"><Copy size={18}/></button></td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                    <div className="p-6 border-t-2 border-slate-100 bg-slate-50 flex justify-end"><button className="game-btn bg-slate-900 text-white px-6 py-3 rounded-2xl text-sm font-bold hover:bg-slate-800 shadow-[0px_4px_0px_#000] active:shadow-none active:translate-y-[4px]">ìƒˆ í‚¤ ë°œê¸‰ë°›ê¸°</button></div>
                </div>
            </div>
        );

        // =================================================================================================
        // [SECTION 5] PAGE COMPONENTS (í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸)
        // =================================================================================================

        const DeveloperConsole = ({ setShowCreateModal, setSelectedItem }) => {
            const [activeMenu, setActiveMenu] = useState('ëŒ€ì‹œë³´ë“œ');
            const menuItems = [
                { id: 'ëŒ€ì‹œë³´ë“œ', icon: Activity, label: 'ëŒ€ì‹œë³´ë“œ' },
                { id: 'ë‚´ ì»¤ë„¥í„°', icon: Database, label: 'ë‚´ ì»¤ë„¥í„°' },
                { id: 'ë‚´ ì—ì´ì „íŠ¸', icon: Bot, label: 'ë‚´ ì—ì´ì „íŠ¸' },
                { id: 'ë‚´ ì›Œí¬í”Œë¡œìš°', icon: GitBranch, label: 'ë‚´ ì›Œí¬í”Œë¡œìš°' },
                { id: 'ë‚´ í¬ë¦¬ë´ì…œ', icon: Key, label: 'ë‚´ í¬ë¦¬ë´ì…œ' },
            ];
            const renderSubContent = () => {
                switch(activeMenu) {
                    case 'ë‚´ ì»¤ë„¥í„°': return <ConnectorsView setSelectedItem={setSelectedItem} />;
                    case 'ë‚´ ì—ì´ì „íŠ¸': return <AgentsView setSelectedItem={setSelectedItem} />;
                    case 'ë‚´ ì›Œí¬í”Œë¡œìš°': return <WorkflowsView setSelectedItem={setSelectedItem} />;
                    case 'ë‚´ í¬ë¦¬ë´ì…œ': return <CredentialsView setSelectedItem={setSelectedItem} />;
                    default: return <DashboardView setShowCreateModal={setShowCreateModal} />;
                }
            };
            return (
                <div className="flex flex-col md:flex-row gap-8 animate-in min-h-[600px] mt-8">
                    <aside className="w-full md:w-72 shrink-0">
                        <div className="bg-white rounded-[2rem] border-2 border-slate-200 p-4 shadow-sm sticky top-24">
                            <div className="text-xs font-bold text-slate-400 px-4 py-3 uppercase mb-2 tracking-widest">Menu</div>
                            <nav className="space-y-2">{menuItems.map((item) => (<button key={item.id} onClick={() => setActiveMenu(item.id)} className={`w-full flex items-center gap-3 px-4 py-3.5 rounded-2xl text-sm font-bold transition-all ${activeMenu === item.id ? 'bg-blue-600 text-white shadow-md transform scale-105' : 'text-slate-600 hover:bg-slate-100 hover:text-slate-900'}`}><item.icon size={20} className={activeMenu === item.id ? 'text-white' : 'text-slate-400'} strokeWidth={2.5}/>{item.label}{activeMenu === item.id && <ChevronRight size={16} className="ml-auto text-blue-200" strokeWidth={3}/>}</button>))}</nav>
                            <div className="mt-6 pt-6 border-t-2 border-slate-100 px-3 pb-2"><div className="bg-slate-900 rounded-3xl p-5 text-white relative overflow-hidden group cursor-pointer"><div className="absolute top-0 right-0 w-16 h-16 bg-blue-500 rounded-full blur-2xl opacity-20 group-hover:opacity-40 transition-opacity"></div><div className="flex items-center gap-2 mb-2 relative z-10"><BookOpen size={18} className="text-blue-400"/><div className="font-bold text-sm">ê°œë°œì ê°€ì´ë“œ</div></div><p className="text-xs text-slate-400 mb-4 leading-relaxed font-normal relative z-10">NEXON Skillsì˜ ëª¨ë“  ê¸°ëŠ¥ì„<br/>ì™„ë²½í•˜ê²Œ í™œìš©í•´ë³´ì„¸ìš”.</p><button className="w-full bg-white/10 hover:bg-white/20 text-xs py-2.5 rounded-xl transition-colors border border-white/10 font-bold flex items-center justify-center gap-1 relative z-10">ë¬¸ì„œ ë³´ê¸° <ExternalLink size={12}/></button></div></div>
                        </div>
                    </aside>
                    <section className="flex-1 min-w-0">{renderSubContent()}</section>
                </div>
            );
        };

        const AINews = ({ setSelectedItem }) => {
            return (
                <div className="space-y-8 animate-in relative"><div className="border-b-2 border-slate-200 pb-6"><h2 className="text-4xl font-bold text-slate-900">ìŠ¤í‚¬ íŠ¸ë Œë“œ</h2><p className="text-slate-500 font-medium mt-2 text-lg">ì „ ì„¸ê³„ì˜ í˜ì‹ ì ì¸ AI ì†Œì‹ì„ ì„ ë³„í•˜ì—¬ ì „ë‹¬í•©ë‹ˆë‹¤.</p></div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">{NEWS_ITEMS.map((news, i) => (<div key={i} className="group cursor-pointer relative hover:z-10" onClick={() => setSelectedItem({ type: 'News', title: news.title, desc: news.content, author: `${news.date} â€¢ NEXON Skills Editors` })}><NewsThumbnail category={news.category} /><div className="px-2"><p className="text-xs font-bold text-slate-400 mb-2 flex items-center gap-1"><Clock size={12}/> {news.date}</p><h3 className="text-xl font-bold text-slate-900 leading-snug group-hover:text-blue-600 transition-colors">{news.title}</h3></div></div>))}</div>
                </div>
            );
        };

        const AIWorkflow = () => {
            const [isEditorOpen, setIsEditorOpen] = useState(false);
            if (isEditorOpen) { return <WorkflowEditor onClose={() => setIsEditorOpen(false)} />; }
            return (
                <div className="space-y-8 animate-in">
                    <div><h2 className="text-4xl font-bold text-slate-900">AI ì›Œí¬í”Œë¡œìš°</h2><p className="text-slate-500 font-medium mt-2 text-lg">ë³µì¡í•œ ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìë™í™” ì—ì´ì „íŠ¸ë¡œ ì—°ê²°í•˜ì„¸ìš”.</p></div>
                    <div className="bg-slate-900 rounded-[3rem] p-12 text-white relative overflow-hidden shadow-2xl border-4 border-slate-900">
                        <div className="relative z-10 flex flex-col md:flex-row items-center gap-16"><div className="space-y-8 flex-1"><h3 className="text-4xl font-bold leading-tight">ë¹„ì£¼ì–¼ ë¹Œë”ë¡œ <br />ì‰½ê²Œ ì„¤ê³„í•˜ì„¸ìš”.</h3><p className="text-slate-400 leading-relaxed font-normal text-lg">ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ íŠ¸ë¦¬ê±°ë¥¼ ì„¤ì •í•˜ê³ , LLMê³¼ ì»¤ìŠ¤í…€ íˆ´ì„ ì—°ê²°í•˜ì—¬ ì™„ë²½í•œ ìë™í™” ì‹œë‚˜ë¦¬ì˜¤ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><button onClick={() => setIsEditorOpen(true)} className="game-btn bg-blue-500 hover:bg-blue-600 px-8 py-4 rounded-2xl font-bold text-lg transition-all shadow-[0px_6px_0px_#1e40af] active:shadow-none active:translate-y-[6px]">ìƒˆ ì›Œí¬í”Œë¡œìš° ë§Œë“¤ê¸°</button></div><div className="flex-1 w-full bg-white/5 backdrop-blur-md rounded-3xl border-2 border-white/10 p-8 space-y-6 shadow-inner"><div className="flex items-center gap-4 bg-white/10 p-4 rounded-2xl border border-white/10"><div className="p-3 bg-blue-500 rounded-xl shadow-lg"><MessageSquare size={20} fill="white"/></div><div className="text-base font-bold">ê³ ê° ë¬¸ì˜ ì ‘ìˆ˜</div></div><div className="flex justify-center"><ArrowRight size={24} className="rotate-90 text-white/30" strokeWidth={3}/></div><div className="flex items-center gap-4 bg-white/10 p-4 rounded-2xl border border-white/10"><div className="p-3 bg-purple-500 rounded-xl shadow-lg"><Cpu size={20}/></div><div className="text-base font-bold">AI ë¶„ì„ (LLM)</div></div><div className="flex justify-center"><ArrowRight size={24} className="rotate-90 text-white/30" strokeWidth={3}/></div><div className="flex items-center gap-4 bg-white/10 p-4 rounded-2xl border border-white/10"><div className="p-3 bg-green-500 rounded-xl shadow-lg"><Bell size={20}/></div><div className="text-base font-bold">ìë™ ì•Œë¦¼ ë° ë°°ì •</div></div></div></div>
                        <div className="absolute top-0 right-0 w-96 h-96 bg-blue-500/30 blur-[150px] -z-0"></div>
                        <div className="absolute bottom-0 left-0 w-64 h-64 bg-purple-500/20 blur-[100px] -z-0"></div>
                    </div>
                </div>
            );
        };

        const WorkflowEditor = ({ onClose }) => {
            const [nodes, setNodes] = useState([ { id: 1, type: 'trigger', label: 'Webhook (Start)', x: 100, y: 150, iconName: 'Globe' }, { id: 2, type: 'action', label: 'Analyze Text (LLM)', x: 400, y: 150, iconName: 'Cpu' }, { id: 3, type: 'action', label: 'Send to Slack', x: 700, y: 150, iconName: 'MessageSquare' } ]);
            const [edges, setEdges] = useState([ { id: 'e1-2', source: 1, target: 2, label: '' }, { id: 'e2-3', source: 2, target: 3, label: 'JSON Data' } ]);
            const [draggingNodeId, setDraggingNodeId] = useState(null);
            const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
            const [connectingSource, setConnectingSource] = useState(null); 
            const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
            const [selectedNodeId, setSelectedNodeId] = useState(null); 
            const [selectedEdgeId, setSelectedEdgeId] = useState(null);
            const [panelPosition, setPanelPosition] = useState({ x: 300, y: 100 }); 
            const [isPanelDragging, setIsPanelDragging] = useState(false);
            const [panelDragOffset, setPanelDragOffset] = useState({ x: 0, y: 0 });
            const canvasRef = useRef(null);
            const [activeSidebarTab, setActiveSidebarTab] = useState('nodes');
            
            const IconMap = { Globe, Bell, Cpu, MessageSquare, Mail, Database, Clock, Split, Box, Bot, GitBranch };
            const toolCategories = { 'Trigger': [ { type: 'trigger', label: 'Webhook', iconName: 'Globe' }, { type: 'trigger', label: 'Schedule', iconName: 'Clock' } ], 'Action': [ { type: 'action', label: 'LLM Analysis', iconName: 'Cpu' }, { type: 'action', label: 'Slack Message', iconName: 'MessageSquare' }, { type: 'action', label: 'Send Email', iconName: 'Mail' }, { type: 'action', label: 'DB Insert', iconName: 'Database' } ], 'Logic': [ { type: 'logic', label: 'If/Else', iconName: 'Split' }, { type: 'helper', label: 'Formatter', iconName: 'Box' } ] };
            const libraryItems = { 'ë‚´ ì»¤ë„¥í„°': [ { id: 'c1', label: 'Nexon User API', type: 'connector', iconName: 'Database' }, { id: 'c2', label: 'Slack Notifier', type: 'connector', iconName: 'MessageSquare' } ], 'ë‚´ ì—ì´ì „íŠ¸': [ { id: 'a1', label: 'CS Responder', type: 'agent', iconName: 'Bot' }, { id: 'a2', label: 'Data Analyst', type: 'agent', iconName: 'Bot' } ], 'ë‚´ ì›Œí¬í”Œë¡œìš°': [ { id: 'w1', label: 'Email Summary', type: 'workflow', iconName: 'GitBranch' } ] };

            const handleNodeLabelChange = (newLabel) => setNodes(nds => nds.map(n => n.id === selectedNodeId ? { ...n, label: newLabel } : n));
            const handleEdgeLabelChange = (newLabel) => setEdges(eds => eds.map(e => e.id === selectedEdgeId ? { ...e, label: newLabel } : e));
            const handleEdgeDelete = () => { setEdges(eds => eds.filter(e => e.id !== selectedEdgeId)); setSelectedEdgeId(null); };
            const handlePanelMouseDown = (e) => { e.stopPropagation(); setIsPanelDragging(true); setPanelDragOffset({ x: e.clientX - panelPosition.x, y: e.clientY - panelPosition.y }); };
            const handleNodeMouseDown = (e, nodeId) => { e.stopPropagation(); const node = nodes.find(n => n.id === nodeId); const rect = e.currentTarget.getBoundingClientRect(); setDragOffset({ x: e.clientX - rect.left, y: e.clientY - rect.top }); setDraggingNodeId(nodeId); };
            const handleNodeSettingsClick = (e, nodeId) => { e.stopPropagation(); setSelectedNodeId(nodeId); setSelectedEdgeId(null); };
            const handleEdgeClick = (e, edgeId) => { e.stopPropagation(); setSelectedEdgeId(edgeId); setSelectedNodeId(null); };
            const handleCanvasClick = () => { setSelectedNodeId(null); setSelectedEdgeId(null); };
            const handleNodeDelete = (e, nodeId) => { e.stopPropagation(); if (selectedNodeId === nodeId) setSelectedNodeId(null); setNodes(nds => nds.filter(n => n.id !== nodeId)); setEdges(eds => eds.filter(edge => edge.source !== nodeId && edge.target !== nodeId)); };
            const handlePortMouseDown = (e, nodeId, portType) => { e.stopPropagation(); e.preventDefault(); if (portType === 'source') { const rect = e.currentTarget.getBoundingClientRect(); const canvasRect = canvasRef.current.getBoundingClientRect(); setConnectingSource({ nodeId, x: rect.left + rect.width / 2 - canvasRect.left, y: rect.top + rect.height / 2 - canvasRect.top }); } };
            const handlePortMouseUp = (e, nodeId, portType) => { e.stopPropagation(); if (connectingSource && portType === 'target') { if (connectingSource.nodeId !== nodeId) { const newEdge = { id: `e${connectingSource.nodeId}-${nodeId}-${Date.now()}`, source: connectingSource.nodeId, target: nodeId, label: '' }; if (!edges.some(edge => edge.source === newEdge.source && edge.target === newEdge.target)) setEdges(eds => [...eds, newEdge]); } } setConnectingSource(null); };
            const handleMouseMove = (e) => { if (isPanelDragging) { setPanelPosition({ x: e.clientX - panelDragOffset.x, y: e.clientY - panelDragOffset.y }); return; } if (!canvasRef.current) return; const canvasRect = canvasRef.current.getBoundingClientRect(); const x = e.clientX - canvasRect.left; const y = e.clientY - canvasRect.top; setMousePos({ x, y }); if (draggingNodeId) { const nodeX = x - dragOffset.x; const nodeY = y - dragOffset.y; setNodes(nds => nds.map(n => n.id === draggingNodeId ? { ...n, x: nodeX, y: nodeY } : n)); } };
            const handleMouseUp = () => { setDraggingNodeId(null); setIsPanelDragging(false); setConnectingSource(null); };
            const handleSidebarDragStart = (e, type, label, iconName) => { e.dataTransfer.setData('application/reactflow', JSON.stringify({ type, label, iconName })); e.dataTransfer.effectAllowed = 'move'; };
            const handleDrop = (e) => { e.preventDefault(); const typeData = e.dataTransfer.getData('application/reactflow'); if (typeData && canvasRef.current) { const { type, label, iconName } = JSON.parse(typeData); const rect = canvasRef.current.getBoundingClientRect(); const x = e.clientX - rect.left - 88; const y = e.clientY - rect.top - 40; const newNode = { id: Date.now(), type, label, x, y, iconName }; setNodes(nds => [...nds, newNode]); setSelectedNodeId(newNode.id); setSelectedEdgeId(null); } };
            const handleDragOver = (e) => { e.preventDefault(); e.dataTransfer.dropEffect = 'move'; };
            const getPath = (sx, sy, tx, ty) => `M ${sx} ${sy} C ${sx + 50} ${sy}, ${tx - 50} ${ty}, ${tx} ${ty}`;
            const selectedNode = selectedNodeId ? nodes.find(n => n.id === selectedNodeId) : null;
            const selectedEdge = selectedEdgeId ? edges.find(e => e.id === selectedEdgeId) : null;
            const isPropertyPanelVisible = selectedNode || selectedEdge;

            return (
                <div className="flex flex-col h-auto lg:h-[calc(100vh-140px)] bg-white border-2 border-slate-200 rounded-[2rem] overflow-hidden animate-in shadow-xl" onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onMouseMove={handleMouseMove}>
                    <div className="bg-white border-b-2 border-slate-200 p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center z-20 gap-3">
                        <div className="flex items-center gap-4"><button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-xl text-slate-500 transition-colors"><ArrowLeft size={24} strokeWidth={3} /></button><div><h3 className="font-bold text-xl text-slate-900 flex items-center gap-2">ìƒˆ ì›Œí¬í”Œë¡œìš° 1 <span className="text-xs font-bold text-slate-400 border-2 border-slate-200 px-2 py-0.5 rounded-lg bg-slate-50">Draft</span></h3></div></div>
                        <div className="flex gap-2 w-full sm:w-auto"><button className="game-btn flex-1 sm:flex-none justify-center px-6 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl font-bold text-sm flex items-center gap-2 shadow-[0px_3px_0px_#15803d] active:shadow-none active:translate-y-[3px]"><Play size={18} strokeWidth={3} /> ì‹¤í–‰ í…ŒìŠ¤íŠ¸</button><button className="game-btn flex-1 sm:flex-none justify-center px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-sm shadow-[0px_3px_0px_#1d4ed8] active:shadow-none active:translate-y-[3px]">ì €ì¥</button></div>
                    </div>
                    <div className="flex-1 flex flex-col md:flex-row relative overflow-hidden">
                        <div className="w-full md:w-64 bg-white border-b-2 md:border-b-0 md:border-r-2 border-slate-200 flex flex-col z-20 h-48 md:h-auto">
                            <div className="flex border-b-2 border-slate-100 p-1 bg-slate-50 gap-1"><button onClick={() => setActiveSidebarTab('nodes')} className={`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-lg transition-all ${activeSidebarTab === 'nodes' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>ê¸°ë³¸ ë…¸ë“œ</button><button onClick={() => setActiveSidebarTab('library')} className={`flex-1 py-2 text-xs font-bold uppercase tracking-wider rounded-lg transition-all ${activeSidebarTab === 'library' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-400 hover:text-slate-600'}`}>ìŠ¤í‚¬ ë¶ˆëŸ¬ì˜¤ê¸°</button></div>
                            <div className="p-4 space-y-6 overflow-y-auto flex-1 bg-slate-50/50">
                                {activeSidebarTab === 'nodes' ? Object.entries(toolCategories).map(([cat, tools]) => (<div key={cat}><div className="text-[10px] font-bold text-slate-400 mb-3 px-1 uppercase tracking-widest">{cat}</div><div className="space-y-2">{tools.map((tool, i) => { const ToolIcon = IconMap[tool.iconName] || Box; return (<div key={i} className="group px-4 py-3 bg-white hover:border-blue-300 shadow-sm hover:shadow-md border-2 border-slate-200 rounded-xl cursor-grab active:cursor-grabbing flex items-center gap-3 transition-all" draggable onDragStart={(e) => handleSidebarDragStart(e, tool.type, tool.label, tool.iconName)}><div className={`p-1.5 rounded-lg border-2 ${tool.type === 'trigger' ? 'bg-orange-50 text-orange-600 border-orange-100' : tool.type === 'action' ? 'bg-blue-50 text-blue-600 border-blue-100' : 'bg-slate-100 text-slate-600 border-slate-200'}`}><ToolIcon size={16} strokeWidth={2.5} /></div><span className="text-sm font-bold text-slate-700">{tool.label}</span><Plus size={16} className="ml-auto text-slate-300 opacity-0 group-hover:opacity-100" strokeWidth={3}/></div>) })}</div></div>)) : Object.entries(libraryItems).map(([category, items]) => (<div key={category}><div className="text-[10px] font-bold text-slate-400 mb-3 px-1 uppercase tracking-widest">{category}</div><div className="space-y-2">{items.map((item, i) => { const ToolIcon = IconMap[item.iconName] || Box; return (<div key={item.id} className="group px-4 py-3 bg-white border-2 border-slate-200 hover:border-indigo-400 hover:shadow-md rounded-xl cursor-grab active:cursor-grabbing flex items-center gap-3 transition-all" draggable onDragStart={(e) => handleSidebarDragStart(e, item.type, item.label, item.iconName)}><div className="p-1.5 rounded-lg bg-indigo-50 text-indigo-600 border-2 border-indigo-100"><ToolIcon size={16} strokeWidth={2.5} /></div><span className="text-sm font-bold text-slate-700 truncate">{item.label}</span><Plus size={16} className="ml-auto text-slate-300 opacity-0 group-hover:opacity-100" strokeWidth={3}/></div>) })}</div></div>))}
                            </div>
                        </div>
                        <div className="flex-1 bg-[#F1F5F9] relative overflow-hidden cursor-default min-h-[400px] bg-grid-pattern" ref={canvasRef} onDrop={handleDrop} onDragOver={handleDragOver} onClick={handleCanvasClick}>
                            <svg className="absolute inset-0 w-full h-full z-0 overflow-visible">
                                {edges.map(edge => { const sourceNode = nodes.find(n => n.id === edge.source); const targetNode = nodes.find(n => n.id === edge.target); if (!sourceNode || !targetNode) return null; const sx = sourceNode.x + 176; const sy = sourceNode.y + 44; const tx = targetNode.x; const ty = targetNode.y + 44; const path = getPath(sx, sy, tx, ty); const isSelected = selectedEdgeId === edge.id; return (<g key={edge.id} onClick={(e) => handleEdgeClick(e, edge.id)} className="group cursor-pointer"><path d={path} stroke="transparent" strokeWidth="20" fill="none" /><path d={path} stroke={isSelected ? "#3b82f6" : "#cbd5e1"} strokeWidth={isSelected ? "6" : "4"} fill="none" className={`transition-colors drop-shadow-sm ${!isSelected && 'group-hover:stroke-blue-400'}`} strokeLinecap="round" />{edge.label && (<g transform={`translate(${(sx + tx) / 2}, ${(sy + ty) / 2})`}><rect x="-50" y="-14" width="100" height="28" rx="8" fill="white" stroke={isSelected ? "#3b82f6" : "#cbd5e1"} strokeWidth="2" className="shadow-sm"/><text x="0" y="5" textAnchor="middle" className={`text-[11px] font-bold ${isSelected ? 'fill-blue-600' : 'fill-slate-500'}`}>{edge.label}</text></g>)}</g>); })}
                                {connectingSource && (<path d={getPath(connectingSource.x, connectingSource.y, mousePos.x, mousePos.y)} stroke="#3b82f6" strokeWidth="4" fill="none" strokeDasharray="8,8" className="drop-shadow-sm animate-pulse pointer-events-none" strokeLinecap="round" />)}
                            </svg>
                            {nodes.map(node => { const NodeIcon = IconMap[node.iconName] || Box; const isDragging = draggingNodeId === node.id; const isSelected = selectedNodeId === node.id; const isLibraryItem = ['connector', 'agent', 'workflow'].includes(node.type); return (<div key={node.id} onMouseDown={(e) => handleNodeMouseDown(e, node.id)} className={`absolute w-44 h-[88px] bg-white border-2 rounded-2xl shadow-sm p-0 flex flex-col group transition-all cursor-grab active:cursor-grabbing z-10 ${isDragging || isSelected ? 'shadow-xl border-blue-500 scale-105 z-50 ring-4 ring-blue-500/20' : 'border-slate-200 hover:border-blue-300'}`} style={{ left: node.x, top: node.y }}><div className={`p-3 flex items-center gap-3 border-b-2 border-slate-50 rounded-t-2xl select-none relative bg-white`}><div className={`w-9 h-9 rounded-xl flex items-center justify-center text-white shadow-[0px_2px_0px_rgba(0,0,0,0.1)] border-2 border-white/20 ${node.type === 'trigger' ? 'bg-orange-500' : isLibraryItem ? 'bg-indigo-600' : node.type === 'action' ? 'bg-blue-600' : 'bg-slate-500'}`}><NodeIcon size={18} strokeWidth={2.5} /></div><div className="text-xs font-bold text-slate-700 truncate flex-1">{node.label}</div><button onClick={(e) => handleNodeSettingsClick(e, node.id)} className="bg-slate-50 rounded-lg p-1.5 shadow-sm border border-slate-200 text-slate-400 hover:text-blue-500 hover:border-blue-200 transition-colors"><Settings size={14} /></button><button onClick={(e) => handleNodeDelete(e, node.id)} className="absolute -top-3 -right-3 bg-white rounded-full p-1.5 shadow-md border-2 border-slate-200 text-slate-400 hover:text-white hover:bg-red-500 hover:border-red-500 opacity-0 group-hover:opacity-100 transition-all z-20 scale-75 hover:scale-100"><X size={14} strokeWidth={3} /></button></div><div className="p-2 bg-slate-50 rounded-b-2xl select-none"><div className="text-[10px] text-slate-400 flex justify-between px-2 font-bold uppercase tracking-wide"><span>Input</span><span>Output</span></div></div><div onMouseUp={(e) => handlePortMouseUp(e, node.id, 'target')} className="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-white border-4 border-slate-300 rounded-full hover:border-blue-500 transition-transform hover:scale-125 cursor-crosshair z-20 shadow-sm" title="Input"></div><div onMouseDown={(e) => handlePortMouseDown(e, node.id, 'source')} className="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-white border-4 border-slate-300 rounded-full hover:border-blue-500 transition-transform hover:scale-125 cursor-crosshair z-20 shadow-sm" title="Output"></div></div>); })}
                        </div>
                        {isPropertyPanelVisible && (
                            <div className="absolute w-72 bg-white rounded-3xl shadow-2xl border-4 border-slate-900 overflow-hidden z-50 flex flex-col animate-in" style={{ left: panelPosition.x, top: panelPosition.y, cursor: isPanelDragging ? 'grabbing' : 'default' }}>
                                <div onMouseDown={handlePanelMouseDown} className="bg-slate-900 border-b-2 border-slate-800 p-4 flex items-center justify-between cursor-grab active:cursor-grabbing"><h4 className="font-bold text-white text-sm flex items-center gap-2"><Settings size={16}/> {selectedNode ? 'ë…¸ë“œ ì†ì„±' : 'ì—°ê²°ì„  ì†ì„±'}</h4><div className="flex items-center gap-2"><Move size={16} className="text-slate-500"/><button onClick={() => { setSelectedNodeId(null); setSelectedEdgeId(null); }} className="text-slate-500 hover:text-red-400"><X size={18} strokeWidth={3}/></button></div></div>
                                <div className="p-5 space-y-4 bg-white">{selectedNode ? (<><div className="space-y-1"><label className="text-[11px] font-bold text-slate-400 uppercase tracking-wide">Node Name</label><input type="text" value={selectedNode.label} onChange={(e) => handleNodeLabelChange(e.target.value)} className="w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-800 focus:outline-none focus:border-blue-500 transition-all font-bold"/></div><div className="space-y-1"><label className="text-[11px] font-bold text-slate-400 uppercase tracking-wide">Type</label><div className="px-3 py-2 bg-slate-100 rounded-xl text-xs text-slate-600 border-2 border-slate-200 font-mono font-bold">{selectedNode.type}</div></div><div className="space-y-1"><div className="text-[11px] font-bold text-slate-400 uppercase tracking-wide mb-1">Configuration</div><div className="h-24 bg-slate-50 border-2 border-slate-200 rounded-xl p-3 text-xs text-slate-400 font-medium">{selectedNode.type === 'trigger' ? 'Webhook URL settings...' : selectedNode.type === 'action' ? 'API Endpoint configuration...' : 'Logic parameters...'}</div></div></>) : (<><div className="space-y-1"><label className="text-[11px] font-bold text-slate-400 uppercase tracking-wide">Edge ID</label><div className="px-3 py-2 bg-slate-100 rounded-xl text-xs text-slate-400 border-2 border-slate-200 font-mono truncate font-bold">{selectedEdge.id}</div></div><div className="space-y-1"><label className="text-[11px] font-bold text-slate-400 uppercase tracking-wide">Label (Optional)</label><input type="text" value={selectedEdge.label || ''} onChange={(e) => handleEdgeLabelChange(e.target.value)} placeholder="ì—°ê²°ì„  ì´ë¦„ ì…ë ¥..." className="w-full bg-slate-50 border-2 border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-800 focus:outline-none focus:border-blue-500 transition-all font-bold"/></div><div className="pt-3 border-t-2 border-slate-100 mt-2"><button onClick={handleEdgeDelete} className="game-btn w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-xl text-xs font-bold transition-colors border-2 border-red-100 shadow-[0px_2px_0px_#fca5a5] active:shadow-none active:translate-y-[2px]"><X size={14} strokeWidth={3}/> ì—°ê²° ì‚­ì œ</button></div></>)}</div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const AIStudio = () => {
            const [activeMode, setActiveMode] = useState('text');
            const [connectedTools, setConnectedTools] = useState([]);
            const [input, setInput] = useState('');
            const [messages, setMessages] = useState([ { id: 1, role: 'user', type: 'text', content: 'ì´ ì œí’ˆ ë””ìì¸ì˜ ê°œì„ ì ì„ ë¶„ì„í•˜ê³ , ë” ëª¨ë˜í•œ ìŠ¤íƒ€ì¼ë¡œ ë³€í˜•í•´ì¤˜.', hasImage: true }, { id: 2, role: 'ai', type: 'text', content: 'ì—…ë¡œë“œí•˜ì‹  ë””ìì¸ì€ ë¯¸ë‹ˆë©€í•˜ì§€ë§Œ, ìƒ‰ìƒ ëŒ€ë¹„ê°€ ë¶€ì¡±í•˜ì—¬ ì‹œì¸ì„±ì´ ë‚®ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ê°œì„ ì„ ì œì•ˆí•©ë‹ˆë‹¤:\n\nâ€¢ ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ì— ê°•ì¡°ìƒ‰(Accent Color) ì ìš©\nâ€¢ ëª¨ì„œë¦¬ ë¼ìš´ë”©(Radius)ì„ 24pxë¡œ ì¦ê°€\nâ€¢ ê·¸ë¦¼ì(Shadow) ì‹¬ë„ë¥¼ ë‚®ì¶° í”Œë«í•œ ëŠë‚Œ ê°•í™”\n\nì œì•ˆ ì‚¬í•­ì„ ë°˜ì˜í•˜ì—¬ ìƒì„±í•œ ì‹œì•ˆì…ë‹ˆë‹¤.', hasResultImage: true } ]);
            const [isTyping, setIsTyping] = useState(false);
            const chatEndRef = useRef(null);
            const availableConnectors = [ { id: 'c1', name: 'Nexon User API', type: 'Private API', icon: Database }, { id: 'c2', name: 'Maple Inventory', type: 'Sandbox API', icon: Box }, { id: 'c3', name: 'Slack Notifier', type: 'MCP', icon: MessageSquare } ];
            const toggleTool = (tool) => { if (connectedTools.some(t => t.id === tool.id)) { setConnectedTools(prev => prev.filter(t => t.id !== tool.id)); } else { setConnectedTools(prev => [...prev, tool]); } };
            useEffect(() => { chatEndRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [messages, isTyping]);
            const handleSend = () => { if (!input.trim()) return; const userMsg = { id: Date.now(), role: 'user', type: 'text', content: input }; setMessages(prev => [...prev, userMsg]); setInput(''); setIsTyping(true); setTimeout(() => { const aiMsg = { id: Date.now() + 1, role: 'ai', type: 'text', content: `"${userMsg.content}"ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.\nì¶”ê°€ì ì¸ ìˆ˜ì • ì‚¬í•­ì´ ìˆìœ¼ì‹ ê°€ìš”?` }; setMessages(prev => [...prev, aiMsg]); setIsTyping(false); }, 1500); };
            const handleKeyDown = (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleSend(); } };

            return (
                <div className="space-y-6 animate-in h-auto lg:h-[calc(100vh-200px)] flex flex-col">
                    <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between bg-white p-6 rounded-[2rem] border-2 border-slate-200 shadow-sm gap-6">
                        <div className="flex items-center gap-4"><h2 className="text-2xl font-bold text-slate-900 flex items-center gap-3">AI ì‹¤í—˜ì‹¤ <span className="hidden sm:inline text-sm font-bold text-slate-400 px-3 border-l-2 border-slate-200 uppercase tracking-widest">Multimodal Sandbox</span></h2></div>
                        <div className="flex flex-col sm:flex-row gap-3 w-full sm:w-auto"><div className="flex bg-slate-100 p-1.5 rounded-xl w-full sm:w-auto border border-slate-200">{['text', 'image', 'video'].map(m => (<button key={m} onClick={() => setActiveMode(m)} className={`flex-1 sm:flex-none px-5 py-2 rounded-lg text-sm font-bold capitalize transition-all ${activeMode === m ? 'bg-white text-blue-600 shadow-sm scale-105' : 'text-slate-400 hover:text-slate-600'}`}>{m}</button>))}</div><div className="hidden sm:block h-full w-[2px] bg-slate-100 mx-2"></div><select className="bg-slate-50 border-2 border-slate-200 rounded-xl px-5 py-2.5 text-sm font-bold focus:ring-0 focus:border-blue-500 outline-none w-full sm:w-auto text-slate-700 cursor-pointer hover:border-blue-300 transition-colors"><option>Gemini 3 Pro (Multimodal)</option><option>GPT-4o</option><option>Claude 3.6 Opus</option></select></div>
                    </div>
                    <div className="flex-1 flex flex-col lg:flex-row gap-6 overflow-hidden">
                        <div className="w-full lg:w-1/3 flex flex-col gap-4">
                            <div className="bg-white rounded-[2rem] border-2 border-slate-200 flex-none lg:flex-1 flex flex-col shadow-sm overflow-hidden min-h-[200px]"><div className="p-5 border-b-2 border-slate-100 flex justify-between items-center bg-slate-50"><span className="text-xs font-bold uppercase text-slate-400 flex items-center gap-2 tracking-wide"><Settings size={14}/> ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸</span></div><textarea className="flex-1 p-5 text-sm focus:outline-none resize-none leading-relaxed text-slate-600 h-32 lg:h-auto font-medium" placeholder="AIì˜ ì—­í• ê³¼ í–‰ë™ ì§€ì¹¨ì„ ì •ì˜í•˜ì„¸ìš”..." defaultValue="ë‹¹ì‹ ì€ ì‹œê°ì  ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì°½ì˜ì ì¸ ì†”ë£¨ì…˜ì„ ì œì•ˆí•˜ëŠ” ë©€í‹°ëª¨ë‹¬ AI ì „ë¬¸ê°€ì…ë‹ˆë‹¤."></textarea></div>
                            <div className="bg-white rounded-[2rem] border-2 border-slate-200 p-5 shadow-sm flex-none lg:flex-1 flex flex-col overflow-hidden min-h-[200px]">
                                <div className="text-xs font-bold uppercase text-slate-400 mb-4 flex items-center gap-2 flex-shrink-0 tracking-wide"><Database size={14}/> ìŠ¤í‚¬ ë¶ˆëŸ¬ì˜¤ê¸° (ë‚´ ì»¤ë„¥í„°)</div>
                                <div className="flex-1 overflow-y-auto space-y-3 pr-1 h-32 lg:h-auto">{availableConnectors.map((tool, i) => { const isConnected = connectedTools.some(t => t.id === tool.id); const Icon = tool.icon; return (<div key={tool.id} onClick={() => toggleTool(tool)} className={`p-4 rounded-2xl border-2 cursor-pointer transition-all flex items-center justify-between group ${isConnected ? 'bg-blue-50 border-blue-500 shadow-md' : 'bg-white border-slate-100 hover:border-blue-300 hover:shadow-md'}`}><div className="flex items-center gap-3"><div className={`p-2.5 rounded-xl border-2 ${isConnected ? 'bg-blue-100 text-blue-600 border-blue-200' : 'bg-slate-50 text-slate-400 border-slate-100 group-hover:bg-blue-50 group-hover:text-blue-500 group-hover:border-blue-100'}`}><Icon size={18} strokeWidth={2.5} /></div><div><div className={`text-sm font-bold ${isConnected ? 'text-blue-900' : 'text-slate-700'}`}>{tool.name}</div><div className="text-[10px] text-slate-400 font-bold">{tool.type}</div></div></div><div className={`w-8 h-8 rounded-full flex items-center justify-center transition-all border-2 ${isConnected ? 'bg-blue-500 text-white border-blue-600' : 'bg-slate-100 text-slate-300 border-slate-200 group-hover:border-blue-300 group-hover:text-blue-400'}`}>{isConnected ? <Check size={16} strokeWidth={4} /> : <Plus size={16} strokeWidth={4} />}</div></div>) })}</div>
                                {connectedTools.length > 0 && (<div className="mt-4 pt-4 border-t-2 border-slate-100 flex-shrink-0"><div className="text-[10px] font-bold text-slate-300 mb-3 uppercase tracking-wide">ì—°ê²°ë¨</div><div className="flex flex-wrap gap-2">{connectedTools.map(t => (<span key={t.id} className="inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-xl text-xs font-bold animate-in border border-blue-200">{t.name}<button onClick={(e) => { e.stopPropagation(); toggleTool(t); }} className="hover:bg-blue-200 rounded-full p-0.5"><X size={12} strokeWidth={3} /></button></span>))}</div></div>)}
                            </div>
                        </div>
                        <div className="w-full lg:flex-1 bg-slate-100 rounded-[2rem] border-2 border-slate-200 flex flex-col shadow-inner overflow-hidden relative min-h-[500px]">
                             <div className="flex-1 p-6 space-y-8 overflow-y-auto no-scrollbar">
                                {messages.map((msg, index) => (
                                    <div key={msg.id} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'} animate-in`}>
                                        <div className={`flex flex-col ${msg.role === 'user' ? 'items-end' : 'items-start'} gap-2 max-w-[85%]`}>
                                            {msg.role === 'ai' && (<div className="flex items-center gap-2 mb-1"><div className="w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-[10px] font-bold border-2 border-white shadow-sm">AI</div><span className="text-xs font-bold text-slate-500">Gemini</span></div>)}
                                            {msg.hasImage && (<div className="bg-white p-2 rounded-2xl border-2 border-slate-200 shadow-sm"><div className="w-48 h-32 bg-slate-100 rounded-xl flex items-center justify-center text-slate-300 mb-2 border-2 border-dashed border-slate-200"><Image size={32}/></div></div>)}
                                            <div className={`px-6 py-4 rounded-[20px] text-sm shadow-sm whitespace-pre-wrap font-medium leading-relaxed ${msg.role === 'user' ? 'bg-slate-900 text-white rounded-tr-none shadow-[0px_4px_0px_rgba(0,0,0,0.1)]' : 'bg-white border-2 border-slate-200 text-slate-700 rounded-tl-none shadow-[0px_4px_0px_#e2e8f0]'}`}>
                                                {msg.role === 'ai' && connectedTools.length > 0 && index === 1 && (<p className="text-blue-600 font-bold mb-3 text-xs flex items-center gap-1 bg-blue-50 p-2 rounded-lg border border-blue-100"><Database size={12}/> Using: {connectedTools.map(t => t.name).join(', ')}</p>)}
                                                {msg.content}
                                            </div>
                                            {msg.hasResultImage && (<div className="bg-white p-3 rounded-3xl border-2 border-slate-200 shadow-sm mt-2 group cursor-pointer relative overflow-hidden hover:scale-[1.02] transition-transform"><div className="w-72 h-48 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl flex items-center justify-center border-2 border-slate-100"><svg viewBox="0 0 100 100" className="w-full h-full p-8 opacity-50"><rect x="20" y="20" width="60" height="60" rx="16" fill="#4F46E5" opacity="0.2"/><circle cx="70" cy="30" r="5" fill="#4F46E5"/><rect x="30" y="40" width="40" height="6" rx="3" fill="#4F46E5" opacity="0.6"/><rect x="30" y="54" width="30" height="6" rx="3" fill="#4F46E5" opacity="0.4"/><rect x="30" y="70" width="20" height="8" rx="4" fill="#4F46E5"/></svg></div><div className="absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100"><div className="bg-white/90 p-3 rounded-full shadow-lg backdrop-blur-sm"><Maximize2 className="text-slate-900" size={24}/></div></div></div>)}
                                        </div>
                                    </div>
                                ))}
                                {isTyping && (<div className="flex justify-start animate-in fade-in"><div className="flex flex-col items-start gap-2"><div className="flex items-center gap-2 mb-1"><div className="w-8 h-8 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-[10px] font-bold border-2 border-white shadow-sm">AI</div><span className="text-xs font-bold text-slate-500">Gemini</span></div><div className="bg-white border-2 border-slate-200 px-5 py-4 rounded-[20px] rounded-tl-none text-sm shadow-sm flex items-center gap-1.5"><div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div><div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style={{animationDelay: '150ms'}}></div><div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce" style={{animationDelay: '300ms'}}></div></div></div></div>)}
                                <div ref={chatEndRef} />
                             </div>
                             <div className="p-5 bg-white border-t-2 border-slate-200">
                                <div className="relative"><textarea rows="1" value={input} onChange={(e) => setInput(e.target.value)} onKeyDown={handleKeyDown} className="w-full bg-slate-50 border-2 border-slate-200 rounded-2xl pl-5 pr-14 py-4 text-sm focus:outline-none focus:border-blue-500 focus:bg-white resize-none font-medium transition-all shadow-inner" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ '/'ë¥¼ ëˆŒëŸ¬ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”..."></textarea><div className="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2"><button className="p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-colors"><Mic size={20}/></button><button onClick={handleSend} className="p-2 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-colors shadow-md hover:scale-105 active:scale-95"><ArrowRight size={20} strokeWidth={3}/></button></div></div>
                                <div className="flex items-center gap-4 mt-4 px-2"><button className="text-xs font-bold text-slate-500 hover:text-slate-900 flex items-center gap-1.5 bg-slate-100 px-3 py-1.5 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors"><Image size={14}/> ì´ë¯¸ì§€ ìƒì„±</button><button className="text-xs font-bold text-slate-500 hover:text-slate-900 flex items-center gap-1.5 bg-slate-100 px-3 py-1.5 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors"><Video size={14}/> ë¹„ë””ì˜¤ ë¶„ì„</button><div className="flex-1"></div><span className="text-[10px] text-slate-300 font-bold uppercase tracking-wide">Shift + Enter for new line</span></div>
                             </div>
                        </div>
                    </div>
                </div>
            );
        };

        const IntegrationGuide = () => {
            const [activeDoc, setActiveDoc] = useState('intro');
            const docs = {
                'intro': { title: 'ì‹œì‘í•˜ê¸° (Getting Started)', content: (<div className="space-y-6"><p className="text-slate-600 leading-relaxed font-normal">NEXON Skills SDKë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ ì„œë¹„ìŠ¤ì— AI ê¸°ëŠ¥ì„ ì†ì‰½ê²Œ í†µí•©í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. ë‹¨ ëª‡ ì¤„ì˜ ì½”ë“œë¡œ ê°•ë ¥í•œ LLM ì—ì´ì „íŠ¸ë¥¼ í˜¸ì¶œí•˜ê³ , ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div className="bg-blue-50 border-l-8 border-blue-500 p-6 rounded-r-2xl shadow-sm"><h4 className="font-bold text-blue-900 text-sm mb-3 flex items-center gap-2 uppercase tracking-wide"><Check size={18} strokeWidth={4}/> ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­</h4><ul className="list-disc pl-5 text-sm text-blue-800 space-y-2 font-bold"><li>NEXON Skills ê³„ì • ìƒì„± ë° ë¡œê·¸ì¸</li><li>ê°œë°œì ì½˜ì†”ì—ì„œ API Key ë°œê¸‰</li><li>Node.js v18 ì´ìƒ í™˜ê²½</li></ul></div><div className="space-y-3"><h4 className="font-bold text-slate-900 text-sm uppercase tracking-wide">ì„¤ì¹˜ (Installation)</h4><div className="bg-slate-900 rounded-2xl p-5 text-slate-300 font-mono text-sm flex justify-between items-center group shadow-lg border-4 border-slate-800"><code>npm install @nexon/skills-sdk</code><button className="opacity-0 group-hover:opacity-100 transition-opacity text-slate-500 hover:text-white"><Copy size={18}/></button></div></div></div>) },
                'auth': { title: 'ì¸ì¦ (Authentication)', content: (<div className="space-y-6"><p className="text-slate-600 font-normal">ëª¨ë“  API ìš”ì²­ì€ `Authorization` í—¤ë”ì— Bearer Tokenì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. API KeyëŠ” ê°œë°œì ì½˜ì†” > ë‚´ í¬ë¦¬ë´ì…œ ë©”ë‰´ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div className="bg-slate-900 rounded-2xl p-6 text-slate-300 font-mono text-sm overflow-x-auto shadow-lg border-4 border-slate-800"><div className="text-slate-500 mb-2 font-bold italic">// SDK ì´ˆê¸°í™” ì˜ˆì œ</div><div className="text-purple-400">import</div> <div className="text-white inline">NexonSkills</div> <div className="text-purple-400 inline">from</div> <div className="text-green-400 inline">'@nexon/skills-sdk'</div>;<br/><br/><div className="text-purple-400">const</div> <div className="text-blue-400 inline">client</div> = <div className="text-purple-400 inline">new</div> <div className="text-yellow-400 inline">NexonSkills</div>({'{'}<br/>&nbsp;&nbsp;apiKey: <div className="text-green-400 inline">'nk_prod_...'</div>,<br/>&nbsp;&nbsp;region: <div className="text-green-400 inline">'kr-1'</div><br/>{'}'});</div></div>) },
                'agent': { title: 'ì—ì´ì „íŠ¸ ì‹¤í–‰ (Execute Agent)', content: (<div className="space-y-6"><p className="text-slate-600 font-normal">íŠ¹ì • ì—ì´ì „íŠ¸ì—ê²Œ ì‘ì—…ì„ ìš”ì²­í•˜ê³  ê²°ê³¼ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¬ë°(Streaming)ì„ ì§€ì›í•˜ì—¬ ê¸´ ì‘ë‹µë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div className="bg-slate-900 rounded-2xl p-6 text-slate-300 font-mono text-sm overflow-x-auto shadow-lg border-4 border-slate-800"><div className="text-purple-400">const</div> <div className="text-blue-400 inline">response</div> = <div className="text-purple-400 inline">await</div> <div className="text-blue-400 inline">client.agents.run</div>({'{'}<br/>&nbsp;&nbsp;agentId: <div className="text-green-400 inline">'agent_abc123'</div>,<br/>&nbsp;&nbsp;inputs: {'{'}<br/>&nbsp;&nbsp;&nbsp;&nbsp;prompt: <div className="text-green-400 inline">'ìµœê·¼ ì„œë²„ ë¡œê·¸ ë¶„ì„í•´ì¤˜'</div>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;files: [<div className="text-green-400 inline">'s3://logs/error.log'</div>]<br/>&nbsp;&nbsp;{'}'}<br/>{'}'});<br/><br/><div className="text-yellow-400">console</div>.log(<div className="text-blue-400 inline">response.output</div>);</div></div>) }
            };

            return (
                <div className="flex flex-col md:flex-row gap-8 animate-in min-h-[600px] mt-8 items-start">
                    <div className="w-full md:w-72 bg-white border-2 border-slate-200 rounded-[2rem] p-5 sticky top-24 shrink-0 shadow-sm">
                        <h3 className="text-xs font-bold text-slate-400 uppercase mb-4 px-2 tracking-widest">Table of Contents</h3>
                        <nav className="space-y-2">
                            <button onClick={() => setActiveDoc('intro')} className={`w-full text-left px-4 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-3 ${activeDoc === 'intro' ? 'bg-blue-600 text-white shadow-md transform scale-105' : 'text-slate-600 hover:bg-slate-100'}`}><BookOpen size={18} strokeWidth={2.5}/> ì‹œì‘í•˜ê¸°</button>
                            <button onClick={() => setActiveDoc('auth')} className={`w-full text-left px-4 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-3 ${activeDoc === 'auth' ? 'bg-blue-600 text-white shadow-md transform scale-105' : 'text-slate-600 hover:bg-slate-100'}`}><ShieldCheck size={18} strokeWidth={2.5}/> ì¸ì¦ (Authentication)</button>
                            <button onClick={() => setActiveDoc('agent')} className={`w-full text-left px-4 py-3 rounded-xl text-sm font-bold transition-all flex items-center gap-3 ${activeDoc === 'agent' ? 'bg-blue-600 text-white shadow-md transform scale-105' : 'text-slate-600 hover:bg-slate-100'}`}><Bot size={18} strokeWidth={2.5}/> ì—ì´ì „íŠ¸ ì—°ë™</button>
                            <button className="w-full text-left px-4 py-3 rounded-xl text-sm font-bold text-slate-300 cursor-not-allowed flex items-center gap-3"><Terminal size={18} strokeWidth={2.5}/> SDK ë ˆí¼ëŸ°ìŠ¤ (ì¤€ë¹„ì¤‘)</button>
                        </nav>
                    </div>
                    <div className="flex-1 w-full bg-white border-2 border-slate-200 rounded-[2rem] p-10 min-h-[500px] shadow-sm"><h2 className="text-4xl font-bold text-slate-900 mb-8">{docs[activeDoc].title}</h2>{docs[activeDoc].content}</div>
                </div>
            );
        };

        const FavoritesView = ({ setSelectedItem }) => {
            const getTypeStyle = (type) => { switch (type) { case 'Agent': return 'bg-blue-100 text-blue-700 border-blue-200'; case 'Connector': return 'bg-purple-100 text-purple-700 border-purple-200'; case 'Workflow': return 'bg-orange-100 text-orange-700 border-orange-200'; default: return 'bg-slate-100 text-slate-700 border-slate-200'; } };
            return (
                <div className="animate-in space-y-8">
                     <div className="border-b-2 border-slate-200 pb-6"><div className="flex items-center gap-4"><div className="p-4 bg-yellow-100 rounded-3xl text-yellow-600 border-2 border-yellow-200 shadow-sm"><Star size={32} className="fill-current" strokeWidth={2.5}/></div><div><h2 className="text-4xl font-bold text-slate-900">ë‚´ ì¦ê²¨ì°¾ëŠ” ìŠ¤í‚¬ ëª©ë¡</h2><p className="text-slate-500 mt-2 font-medium">ìì£¼ ì‚¬ìš©í•˜ëŠ” ë„êµ¬ë“¤ì„ í•œê³³ì—ì„œ ëª¨ì•„ë³´ê³  ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ì„¸ìš”.</p></div></div></div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {FAVORITES_ITEMS.map((item, idx) => (
                            <div key={idx} onClick={() => setSelectedItem(item)} className="group bg-white border-2 border-slate-100 rounded-[2rem] p-7 shadow-sm hover:shadow-[0px_8px_0px_rgba(0,0,0,0.1)] hover:-translate-y-2 transition-all duration-300 cursor-pointer animate-fade-in relative overflow-hidden">
                                <div className="absolute top-0 right-0 p-5"><Star size={24} className="text-yellow-400 fill-yellow-400" /></div>
                                <div className="flex justify-between items-start mb-5"><span className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide border ${getTypeStyle(item.type)}`}>{item.type}</span></div>
                                <h3 className="text-2xl font-bold text-slate-900 mb-3 group-hover:text-blue-600 transition-colors pr-6">{item.title}</h3><p className="text-slate-500 text-sm leading-relaxed mb-6 line-clamp-2 h-10 font-normal">{item.desc}</p>
                                <div className="flex items-center justify-between pt-5 border-t-2 border-slate-50"><div className="flex items-center gap-2"><div className="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600 border-2 border-white shadow-sm">{item.author[0]}</div><span className="text-xs text-slate-500 font-bold">{item.author}</span></div><div className="flex items-center gap-1 text-yellow-500 text-xs font-bold"><Star size={14} className="fill-current" /><span>{(item.stars / 1000).toFixed(1)}k</span></div></div>
                            </div>
                        ))}
                        <div className="border-4 border-dashed border-slate-200 rounded-[2rem] p-6 flex flex-col items-center justify-center text-center hover:border-blue-300 hover:bg-blue-50/50 transition-all cursor-pointer group min-h-[200px]">
                            <div className="w-14 h-14 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4 group-hover:bg-white group-hover:text-blue-500 shadow-sm transition-colors group-hover:scale-110 duration-300"><Plus size={32} strokeWidth={3} /></div><h3 className="font-bold text-slate-900 mb-1 text-lg">ìŠ¤í‚¬ ë” ì°¾ì•„ë³´ê¸°</h3><p className="text-xs text-slate-400 font-medium">í™ˆ í™”ë©´ì—ì„œ ë³„í‘œë¥¼ ëˆŒëŸ¬<br/>ì´ê³³ì— ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
                        </div>
                    </div>
                </div>
            );
        };

        const HomePage = ({ selectedGame, setSelectedGame, gameList, showStickySearch, setSelectedItem, isLoggedIn, setShowLoginScreen }) => {
            const [items, setItems] = useState(HOME_INITIAL_ITEMS);
            const [isLoading, setIsLoading] = useState(false);
            const loadingRef = useRef(isLoading);
            
            useEffect(() => { loadingRef.current = isLoading; }, [isLoading]);
            
            const generateRandomItems = (count) => { const types = ['Agent', 'Connector', 'Workflow']; const titles = ['Super AI', 'Auto Notion', 'Slack Bot', 'Data Miner', 'Email Wiz', 'Code Fixer', 'Image Gen', 'Text Sum', 'Game Ops', 'Server Mon']; const descs = [ 'ìš´ì˜ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•˜ëŠ” íŒ¨ì‹œë¸Œ ìŠ¤í‚¬ì…ë‹ˆë‹¤.', 'ë³µì¡í•œ ë°ì´í„°ë¥¼ ë¯¸ë‹ˆë§µì²˜ëŸ¼ í•œëˆˆì— íŒŒì•…í•˜ì„¸ìš”.', 'ë°˜ë³µ í€˜ìŠ¤íŠ¸ë¥¼ ìë™í™”í•˜ì—¬ ê°œë°œ ì‹œê°„ì„ ì ˆì•½í•˜ì„¸ìš”.', 'íŒ€ì˜ ìƒì‚°ì„± ë²„í”„ë¥¼ 200% í–¥ìƒì‹œí‚µë‹ˆë‹¤.', 'ê°•ë ¥í•œ AI ì—”ì§„ì„ ì¥ì°©í–ˆìŠµë‹ˆë‹¤.' ]; const authors = ['Nexon_Dev', 'AI_Lab', 'AutomateIt', 'DevTeam_A', 'SoloDev', 'CreativeMinds']; return Array.from({ length: count }).map((_, i) => ({ type: types[Math.floor(Math.random() * types.length)], title: `${titles[Math.floor(Math.random() * titles.length)]} v${Math.floor(Math.random() * 10)}.0`, desc: descs[Math.floor(Math.random() * descs.length)], author: authors[Math.floor(Math.random() * authors.length)], stars: Math.floor(Math.random() * 5000) + 100 })); };
            
            const loadMore = useCallback(() => { 
                if (loadingRef.current) return; 
                setIsLoading(true); 
                setTimeout(() => { 
                    const newItems = generateRandomItems(6); 
                    setItems(prev => [...prev, ...newItems]); 
                    setIsLoading(false); 
                }, 800); 
            }, []);
            
            useEffect(() => { 
                const handleScroll = () => { 
                    const { scrollTop, clientHeight, scrollHeight } = document.documentElement; 
                    if (scrollTop + clientHeight >= scrollHeight - 200 && !loadingRef.current) { 
                        loadMore(); 
                    } 
                }; 
                window.addEventListener('scroll', handleScroll); 
                return () => window.removeEventListener('scroll', handleScroll); 
            }, [loadMore]);
            
            const getTypeStyle = (type) => { switch (type) { case 'Agent': return 'bg-blue-100 text-blue-700 border-blue-200'; case 'Connector': return 'bg-purple-100 text-purple-700 border-purple-200'; case 'Workflow': return 'bg-orange-100 text-orange-700 border-orange-200'; default: return 'bg-slate-100 text-slate-700 border-slate-200'; } };

            return (
                <div className="animate-in">
                    <div className="text-center space-y-8 py-20 px-4 relative">
                        <h1 className="text-5xl md:text-6xl font-bold text-slate-900 tracking-tight leading-tight drop-shadow-sm">í©ì–´ì§„ AI ë„êµ¬, <br className="md:hidden" /> <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600">ë„¥ìŠ¨ìŠ¤í‚¬ë¡œ ì—°ê²°í•˜ì„¸ìš”.</span></h1>
                        <p className="max-w-2xl mx-auto text-xl text-slate-500 leading-relaxed font-normal">ê°œë°œê³¼ ìš´ì˜ì˜ ë‚œì´ë„ë¥¼ ë‚®ì¶°ì¤„ AI ë„êµ¬,<br className="hidden md:block"/> NEXON Skillsì—ì„œ í•„ìš”í•œ ëŠ¥ë ¥ì„ <span className="text-blue-600 font-bold bg-blue-50 px-2 rounded-lg border border-blue-100">íŒŒë°</span>í•˜ê³  <span className="text-purple-600 font-bold bg-purple-50 px-2 rounded-lg border border-purple-100">ì¥ì°©</span>í•˜ì„¸ìš”.</p>
                        <div className={`max-w-4xl mx-auto mt-12 relative z-10 transition-all duration-500 ease-in-out ${showStickySearch ? 'opacity-0 translate-y-[-20px] pointer-events-none' : 'opacity-100 translate-y-0'}`}>
                            <div className="flex flex-col md:flex-row items-stretch md:items-center bg-white border-2 border-slate-200 rounded-[2rem] shadow-xl p-2.5 focus-within:ring-4 focus-within:ring-blue-500/20 focus-within:border-blue-500 transition-all hover:scale-[1.01] hover:shadow-2xl">
                                <div className="relative px-2 md:pl-6 md:pr-2 border-b-2 md:border-b-0 md:border-r-2 border-slate-100 group flex items-center shrink-0 py-2 md:py-0"><Gamepad2 className="w-6 h-6 text-slate-400 group-hover:text-blue-500 transition-colors pointer-events-none ml-2 md:ml-0" /><select value={selectedGame} onChange={(e) => setSelectedGame(e.target.value)} className="w-full md:w-auto appearance-none bg-transparent font-bold text-slate-700 py-4 pl-3 pr-10 rounded-lg focus:outline-none cursor-pointer text-base hover:text-blue-600 transition-colors"><option>ì „ì²´ ê²Œì„</option>{gameList.map(game => <option key={game} value={game}>{game}</option>)}</select><ChevronDown className="absolute right-4 md:right-2 w-4 h-4 text-slate-400 pointer-events-none" strokeWidth={3} /></div>
                                <div className="flex-1 relative flex items-center"><div className="absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none"><Search className="h-6 w-6 text-slate-400" strokeWidth={3} /></div><input type="text" className="block w-full pl-16 pr-6 py-4 bg-transparent text-slate-900 placeholder-slate-400 focus:outline-none text-lg font-medium" placeholder="ì†Œí™˜í•˜ê³  ì‹¶ì€ ì»¤ë„¥í„°, ì—ì´ì „íŠ¸, ì›Œí¬í”Œë¡œìš°ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”..." /><button className="md:hidden absolute right-2 p-2 bg-slate-100 text-slate-600 rounded-full hover:bg-slate-200 transition-colors"><ArrowRight size={20} /></button></div><button className="hidden md:block px-10 py-4 bg-slate-900 text-white rounded-[1.5rem] font-bold hover:bg-slate-800 transition-colors shadow-lg shrink-0 ml-2 text-lg active:scale-95">ê²€ìƒ‰</button></div>
                            <div className="mt-6 flex flex-wrap justify-center gap-3 text-sm text-slate-500 font-medium"><span>ì¸ê¸° ìŠ¤í‚¬ë¶:</span>{['ë…¸ì…˜ ì—°ë™', 'ë°ì´í„° ë¶„ì„', 'ë§ˆì¼€íŒ… ìë™í™”', 'ì½”ë“œ ë¦¬ë·°'].map((tag) => (<button key={tag} className="hover:text-blue-600 hover:bg-blue-50 px-3 py-1 rounded-full transition-colors border border-transparent hover:border-blue-100">{tag}</button>))}</div>
                        </div>
                    </div>
                    <div className="max-w-7xl mx-auto px-4 mt-12 pb-24">
                        <div className="flex justify-between items-center mb-8"><h2 className="text-3xl font-bold text-slate-900 flex items-center gap-2">ğŸ”¥ ì§€ê¸ˆ ëœ¨ëŠ” ì¸ê¸° ìŠ¤í‚¬</h2></div>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {items.map((item, idx) => (
                                <div key={idx} onClick={() => setSelectedItem(item)} className="group bg-white border-2 border-slate-100 rounded-[2.5rem] p-7 shadow-sm hover:shadow-[0px_8px_0px_#cbd5e1] hover:-translate-y-2 transition-all duration-300 cursor-pointer animate-fade-in relative hover:z-10"><div className="flex justify-between items-start mb-5"><span className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wide border ${getTypeStyle(item.type)}`}>{item.type}</span><div className="flex items-center gap-1.5 text-slate-400 text-sm font-bold bg-slate-50 px-3 py-1 rounded-full"><Star size={16} className="fill-slate-200 group-hover:fill-yellow-400 group-hover:text-yellow-400 transition-colors" strokeWidth={2.5} /><span>{(item.stars / 1000).toFixed(1)}k</span></div></div><h3 className="text-2xl font-bold text-slate-900 mb-3 group-hover:text-blue-600 transition-colors">{item.title}</h3><p className="text-slate-500 text-sm leading-relaxed mb-6 line-clamp-2 h-10 font-normal">{item.desc}</p><div className="flex items-center justify-between pt-5 border-t-2 border-slate-50"><div className="flex items-center gap-3"><div className="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-[10px] font-bold text-slate-600 border-2 border-white shadow-sm">{item.author[0]}</div><span className="text-xs text-slate-500 font-bold">{item.author}</span></div><button className="text-slate-300 hover:text-blue-600 transition-colors bg-slate-50 p-2 rounded-xl hover:bg-blue-50"><Share2 size={18} strokeWidth={2.5}/></button></div></div>
                            ))}
                        </div>
                        {isLoading && (<div className="flex justify-center items-center py-12"><div className="loader mr-4"></div><span className="text-slate-500 font-bold text-lg">ë” ë§ì€ ìŠ¤í‚¬ì„ ì†Œí™˜í•˜ëŠ” ì¤‘...</span></div>)}
                    </div>
                </div>
            );
        };

        // =================================================================================================
        // [SECTION 6] MAIN APP COMPONENT (ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸)
        // =================================================================================================

        const App = () => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            const [currentTab, setCurrentTab] = useState('í™ˆ');
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [showLoginScreen, setShowLoginScreen] = useState(false);
            const [pendingTab, setPendingTab] = useState(null);
            const [selectedItem, setSelectedItem] = useState(null);
            const [showCreateModal, setShowCreateModal] = useState(false);
            const [selectedGame, setSelectedGame] = useState('ì „ì²´ ê²Œì„');
            const [showStickySearch, setShowStickySearch] = useState(false);
            const [footerLogoError, setFooterLogoError] = useState(false);

            useEffect(() => { 
                const handleScroll = () => { 
                    if (window.scrollY > 300) { setShowStickySearch(true); } 
                    else { setShowStickySearch(false); } 
                }; 
                window.addEventListener('scroll', handleScroll); 
                return () => window.removeEventListener('scroll', handleScroll); 
            }, []);
            
            const handleNavClick = (tabName) => { 
                if (tabName === 'í™ˆ') { setCurrentTab('í™ˆ'); setIsMenuOpen(false); return; } 
                const targetMenu = MAIN_MENUS.find(m => m.name === tabName); 
                if (targetMenu?.authRequired && !isLoggedIn) { 
                    setPendingTab(tabName); 
                    setShowLoginScreen(true); 
                    setIsMenuOpen(false); 
                } else { 
                    setCurrentTab(tabName); 
                    setIsMenuOpen(false); 
                } 
            };
            
            const handleLogin = (e) => { 
                e.preventDefault(); 
                setIsLoggedIn(true); 
                setShowLoginScreen(false); 
                if (pendingTab) { setCurrentTab(pendingTab); setPendingTab(null); } 
            };
            
            const handleLogout = () => { setIsLoggedIn(false); setCurrentTab('í™ˆ'); };
            
            const renderContent = () => {
                switch (currentTab) {
                    case 'ê°œë°œì ì½˜ì†”': return <DeveloperConsole setShowCreateModal={setShowCreateModal} setSelectedItem={setSelectedItem} />;
                    case 'ìŠ¤í‚¬ íŠ¸ë Œë“œ': return <AINews setSelectedItem={setSelectedItem} />;
                    case 'ìŠ¤í‚¬ ê°€ì´ë“œ': return <IntegrationGuide />;
                    case 'AI ì›Œí¬í”Œë¡œìš°': return <AIWorkflow />;
                    case 'AI ì‹¤í—˜ì‹¤': return <AIStudio />;
                    case 'ì¦ê²¨ì°¾ê¸°': return <FavoritesView setSelectedItem={setSelectedItem} />;
                    default: return <HomePage selectedGame={selectedGame} setSelectedGame={setSelectedGame} gameList={GAME_LIST} showStickySearch={showStickySearch} setSelectedItem={setSelectedItem} isLoggedIn={isLoggedIn} setShowLoginScreen={setShowLoginScreen} />;
                }
            };

            return (
                <div className="min-h-screen flex flex-col relative font-sans">
                    {/* Modals Layer */}
                    {showLoginScreen && <LoginScreen onClose={() => setShowLoginScreen(false)} onLogin={handleLogin} />}
                    {selectedItem && <ItemDetailModal item={selectedItem} onClose={() => setSelectedItem(null)} isLoggedIn={isLoggedIn} setShowLoginScreen={setShowLoginScreen} />}
                    {showCreateModal && <CreateSelectionModal onClose={() => setShowCreateModal(false)} />}

                    {/* Navigation Bar */}
                    <GNB 
                        currentTab={currentTab} 
                        isLoggedIn={isLoggedIn} 
                        isMenuOpen={isMenuOpen} 
                        setIsMenuOpen={setIsMenuOpen} 
                        handleNavClick={handleNavClick} 
                        handleLogout={handleLogout} 
                        setShowLoginScreen={setShowLoginScreen} 
                        showStickySearch={showStickySearch} 
                        selectedGame={selectedGame} 
                        setSelectedGame={setSelectedGame} 
                        gameList={GAME_LIST} 
                        mainMenus={MAIN_MENUS} 
                    />

                    {/* Main Content Area */}
                    <main className="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-10">
                        {renderContent()}
                    </main>

                    {/* Footer */}
                    <footer className="bg-white border-t-2 border-slate-100 py-12 mt-12">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6">
                            <div className="flex items-center gap-3 text-slate-400">
                                <div className="w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center">
                                     <Zap size={16} fill="currentColor" className="text-slate-300"/>
                                </div>
                                <span className="text-sm font-bold">Â© 2026 NEXON Skills Inc. All rights reserved.</span>
                            </div>
                            <div className="flex gap-8 text-sm font-bold text-slate-500">
                                <a href="#" onClick={(e) => e.preventDefault()} className="hover:text-slate-900 transition-colors">Privacy Policy</a>
                                <a href="#" onClick={(e) => e.preventDefault()} className="hover:text-slate-900 transition-colors">Terms of Service</a>
                                <a href="#" onClick={(e) => e.preventDefault()} className="hover:text-slate-900 transition-colors">Contact Us</a>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

